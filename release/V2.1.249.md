# SanguiBlog V2.1.249 Release Notes

> **版本性质**：首次对外发布（First Release）  
> **文档生成日期**：2025-12-30  
> **站点版本号来源**：后端 `application.yaml` 的 `site.version`，前端首页 Banner 展示 `SANGUI BLOG // <version>`

## 1. 版本亮点

- **前后端分离**：后端 Spring Boot 3.2.5（REST API），前端 React 19 + Vite（SPA）。
- **内容与渲染**：全站以 Markdown 为核心内容形态，支持 GFM（表格/任务列表等）、KaTeX 数学公式、代码块复制、目录锚点与平滑跳转。
- **管理后台完备**：覆盖文章/标签/用户/评论/权限/数据分析/系统维护，适合个人博客长期演进与自维护。
- **静态资源与上传体系**：文章资源、封面、头像、工具页（游戏页）统一落盘与访问前缀策略，便于部署与备份。

## 2. 功能清单

### 2.1 访客端（Public）

- **首页**：版本 Banner、文章分页列表、关键字搜索、按分类/标签筛选。
- **文章详情**：Markdown 渲染、目录浮层（h1/h2/h3）、上一篇/下一篇、同分类推荐、评论区与楼中楼、评论锚点定位。
- **归档/关于**：独立页面与稳定路由；关于页复用同款 Markdown 渲染与代码块复制交互。
- **工具中心**：工具列表/详情（含 `/tools/:id`），并兼容历史 `/games` 跳转逻辑。

### 2.2 管理端（Admin）

- **登录与会话**：JWT 无状态认证；登录失败具备防刷策略与验证码机制；前端对过期 Token 有明确的失效提示与清理策略。
- **文章管理**：文章分页、搜索、按分类筛选；独立编辑页支持标题/slug/摘要/状态/分类/标签/主题色/Markdown 正文等维护。
- **文章发布**：进入发布页自动预留 slug 目录；支持正文插图上传并在光标处插入 Markdown；支持封面图上传并随文章字段保存。
- **标签管理**：新增/编辑/删除/分页/搜索；后端自动生成 slug（兼容中文）并做唯一性校验。
- **个人资料**：头像上传、基础资料、Bio、GitHub、密码重置与只读账户元信息展示。
- **用户管理**：创建/编辑/删除后台账号；角色选择与关键词/分页筛选；头像上传与旧头像清理策略一致化。
- **评论管理**：评论检索、审核（状态变更/内容改写）、删除、后台官方回复（与前台同链路）。
- **数据分析**：后台概览与访问日志（PV/UV、趋势、来源等），支持按权限删除访问记录。
- **权限矩阵**：基于权限码的“角色-权限”矩阵配置；前端按钮展示与后端 `@PreAuthorize` 双重约束。
- **系统设置/维护**（SUPER_ADMIN）：游戏页面管理、未引用资源扫描与清理、空目录清理等自维护工具。

## 3. 技术栈与环境要求

### 3.1 后端

- Java：**21**
- Spring Boot：3.2.5
- 数据库：MySQL 8.0+（建议 UTF8MB4）
- ORM：Spring Data JPA（`ddl-auto: none`，表结构需手动维护）
- 安全：Spring Security + JWT（JJWT 0.11.5）

### 3.2 前端

- Node.js：≥ 18（建议 20）
- React：19.2.0
- Vite：7.2.4
- TailwindCSS：4.1.17

## 4. 快速部署（建议路径）

### 4.1 初始化数据库

1. 创建数据库（示例）：`sanguiblog_db`（UTF8MB4）。
2. 执行根目录 `sanguiblog_db.sql` 初始化表结构与基础数据。

### 4.2 配置后端

后端配置文件：`SanguiBlog-server/src/main/resources/application.yaml`，重点关注：

- `spring.datasource.*`：数据库连接
- `jwt.secret`：JWT 密钥（建议通过环境变量 `JWT_SECRET` 注入）
- `storage.base-path`：上传目录根路径（建议生产环境指向持久化挂载目录）
- `site.version`：站点版本号（当前为 `V2.1.249`）
- `site.asset-base-url`：uploads 访问前缀（用于前端拼接资源 URL）

### 4.3 启动服务

- 后端默认端口：**8082**（可在 `application.yaml` 中调整）。
- 前端构建产物：`SanguiBlog-front/dist/`，可交由 Nginx/静态站点托管，并将 `/api/` 反向代理到后端。

## 5. 已知注意事项

- Swagger/OpenAPI：当前默认关闭（`springdoc.swagger-ui.enabled=false`），如需对外暴露请自行评估风险并开启。
- JPA 不自动建表：`ddl-auto: none`，数据库结构变更应通过 SQL 迁移脚本维护。
- 安全头与 XSS：后端对 API/静态资源响应统一下发安全响应头；前端 Markdown/HTML 渲染路径包含清洗策略，请勿在后台写入不可信脚本内容。

## 6. 升级说明

- **这是第一个发布版本**，无历史版本升级路径说明；建议以“全新部署”方式初始化数据库并完成配置后上线。
