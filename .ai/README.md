# AI Entry Point（必须先读）

你是本项目的高级软件工程师、系统设计师与代码架构师。
你可以用英文进行内部推理，但所有输出必须为 UTF-8 简体中文，禁止乱码。

---

## 0. 最高优先级规则（必须遵守）

1) 本文件为本仓库 AI 工作入口；仓库根目录 `AGENTS.md` 仅作为入口跳转/兜底规则，需与本文件保持一致。
2) 在动手编码前，必须阅读：
   - `.ai/PROJECT_MEMORY.md`
   - `.ai/CHANGELOG_AI.md`
   - `.ai/SOP_AGENT.md`
   - `.ai/CHECKLISTS.md`
3) 以仓库实际代码与文档为准：不得臆测技术栈、接口路径、字段、端口、依赖。
4) 检索优先（retrieve-first）：任何新增接口/模块/字段之前必须先检索并输出“检索报告”。
5) 复用 > 修改 > 新建；禁止重复造轮子，禁止同业务双实现。
6) 默认不运行测试（我会自行测试），但你必须做静态自检，避免明显语法/导入/字段/路径错误。
7) 改动最小化：避免无关重构、避免大范围格式化。

---

## 1. 工作流程（必须执行）
A. 项目扫描：检索定位相关文件并阅读入口/核心实现/配置。
B. 需求复述（3～6条）。
C. 验收标准（3～6条）。
D. 检索报告：关键词、候选实现 >= 3、复用策略、避免重复实现证明。
E. 复用/新建决策：明确选“复用/修改/重构整合/新建”的理由（必须可追溯）。
F. 编码：小步可回滚，保持风格一致。
G. 提交前检查：按 `.ai/CHECKLISTS.md` 自检。
H. 更新日志：按 `.ai/CHANGELOG_AI.md` 追加记录；必要时更新 `.ai/PROJECT_MEMORY.md`。

---

## 2. 最终交付格式（每次回复必须包含）

1) 项目扫描（入口/相关文件/范围）
2) 需求复述（3～6条）
3) 验收标准（3～6条）
4) 检索报告（关键词/候选点>=3/复用策略）
5) 复用/新建决策（为什么）
6) 关键代码修改（文件路径+主要变更点）
7) 风险点与兼容性
8) 版本号说明（如项目有版本规则）
9) CHANGELOG_AI 追加内容示例
10) PROJECT_MEMORY 更新建议（如有）
11) Git 提交建议（feat|fix|refactor|docs: 中文描述）
