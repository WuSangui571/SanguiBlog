# AI Change Log（AI修改日志）

> 目的：记录每次由 AI 参与的改动，避免后续任务重复造轮子或破坏既有行为。
> 要求：每次合并前必须追加一条记录（倒序）。

---

## [2026-01-04] 文章页渲染一致性与可访问性增强（HTML 兜底样式 + Esc 关闭预览/目录）
- 背景/需求：按“建议清单”执行文章页第 1/5 条：减少 Markdown 渲染与 HTML 兜底渲染的视觉差异，并补齐图片预览/移动端目录抽屉的键盘可用性。
- 修改类型：fix
- 影响范围：文章详情页 `/article/:id`（前端渲染与样式）
- 变更摘要：
  1) 统一 `.sg-article-markdown` 下行内 `code` 的 padding/字体/配色：Markdown 与 HTML 兜底输出一致。
  2) 图片预览支持 `Esc` 关闭，并在打开时聚焦遮罩、关闭时恢复焦点，避免键盘焦点逃逸。
  3) 移动端目录抽屉支持 `Esc` 关闭，打开时聚焦“关闭”按钮、关闭时恢复焦点，并补充必要的 `aria-label`。
- 涉及文件：
  - `SanguiBlog-front/src/appfull/public/ArticleDetail.jsx`
  - `SanguiBlog-front/src/index.css`
- 检索与复用策略：
  - 检索关键词：`dangerouslySetInnerHTML` / `safeHtml` / `prose-invert` / `previewImage` / `tocDrawerOpen`
  - 找到的旧实现：文章页 `sg-article-markdown` 容器、图片预览层、移动端目录抽屉
  - 最终选择：复用现有结构，追加最小的 CSS 规则与键盘事件监听（不新增模块/不引入依赖）
- 风险点：
  - CSS 覆盖可能影响文章页个别自定义样式；已用 `.sg-article-markdown` 范围限定，且仅针对行内 `code`。
- 验证方式：
  - 人工验证：同一篇文章在 `contentMd` 与 `contentHtml` 路径下行内 code 外观一致；图片预览与目录抽屉均可 `Esc` 关闭，且焦点不会跑丢。

## [2026-01-04] 修复文章页 Markdown 行内代码标题字号、摘要 Markdown 渲染与前后篇跳转偶发 fetch 报错
- 背景/需求：文章详情页（`/article/:id`）存在 3 个问题：1) 标题中的 `` `xxx` `` 行内代码被渲染成与正文同级的偏小字号；2) 点击“上一篇/下一篇”偶发跳转失败，报 `String contains non ISO-8859-1 code point`，刷新后恢复；3) 摘要区 `` `xxx` `` 无法按 Markdown 渲染。
- 修改类型：fix
- 影响范围：前台文章详情页渲染 / 前端埋点请求头 / 后端文章详情接口
- 变更摘要：
  1) 为文章页标题内的 `code` 强制继承标题字号，避免被 `text-sm` 缩小。
  1.1) 补充修复：正文行内 `code` 与正文同字号（Markdown 与 HTML 兜底路径一致），避免正文中 `` `xxx` `` 仍偏小。
  2) 摘要区改为 `ReactMarkdown` 渲染（支持行内代码/高亮等），并抑制额外段落 margin。
  3) 前端对 `X-SG-Referrer` / `X-SG-Source-Label` 统一 `encodeURIComponent`，后端 `PostController` 兜底 decode，避免浏览器 fetch header 的 ISO-8859-1 限制导致跳转报错。
- 涉及文件：
  - `SanguiBlog-front/src/appfull/public/ArticleDetail.jsx`
  - `SanguiBlog-front/src/api.js`
  - `SanguiBlog-server/src/main/java/com/sangui/sanguiblog/controller/PostController.java`
  - `SanguiBlog-front/src/index.css`
- 检索与复用策略：
  - 检索关键词：`/article/:id`、`ArticleDetail`、`post.excerpt`、`text-sm`、`inlineCodeBg`、`X-SG-Source-Label`、`buildAnalyticsReferrerHeaders`
  - 找到的旧实现：文章页 Markdown 渲染与自定义 `code` 渲染器、文章详情请求头埋点逻辑、后端 `PostController` 对应 Header 入参
  - 最终选择：复用并最小改动原有渲染/埋点链路（不新增接口/不新增模块）
- 风险点：
  - Header 编码/解码链路变更：若存在第三方客户端直连接口并依赖原始 header 值展示，可能看到被编码的字符串；后端已做 decode 兜底，影响应可控。
- 验证方式：
  - 人工验证：标题中 `` `xxx` `` 与标题字号一致；摘要内 `` `xxx` `` 正常渲染为红色行内代码；点击上一篇/下一篇不再出现 fetch header 报错。

## [2026-01-03] 移除根目录旧提示词文件，统一使用 `.ai`
- 背景/需求：你计划删除根目录 `AGENTS.md` / `NOTE.md` / `AGENTS-EDIT.md`，并要求仓库文档全面改为以 `.ai/README.md` 为唯一入口，消除所有导向旧文件的说明。
- 修改类型：docs
- 影响范围：AI 提示词 / 文档工作流 / 发布文档引用
- 变更摘要：
  1) 更新根目录 `README.md`，将“技术手册/变更日志/AI 入口”统一指向 `.ai/*`。
  2) 更新 `release/V2.1.275.md`，将“逐版本明细”引用改为 `.ai/CHANGELOG_AI.md`。
  3) 更新 `.ai/README.md` 与 `.ai/CHECKLISTS.md`，移除对根目录旧文件的依赖描述。
  4) 删除根目录旧文件（见涉及文件），避免未来误读/误维护。
- 涉及文件：
  - `README.md`
  - `release/V2.1.275.md`
  - `.ai/README.md`
  - `.ai/CHECKLISTS.md`
  - `.ai/PROJECT_MEMORY.md`
  - `AGENTS.md`（已删除）
  - `NOTE.md`（已删除）
  - `AGENTS-EDIT.md`（已删除）
- 检索与复用策略：
  - 检索关键词：`AGENTS.md` / `NOTE.md` / `AGENTS-EDIT.md` / `PROJECT_MEMORY` / `CHANGELOG_AI`
  - 找到的旧实现：`README.md`、`release/V2.1.275.md`、`.ai/README.md` 等文件中存在对旧文档的引用
  - 最终选择：统一改为引用 `.ai/*`，并删除旧文件，彻底消除导向
- 风险点：
  - 若外部工具/脚本仍硬编码读取 `NOTE.md` 或 `AGENTS-EDIT.md`，会出现“文件不存在”；需要改为读取 `.ai/PROJECT_MEMORY.md` / `.ai/CHANGELOG_AI.md`。
- 验证方式：
  - 人工检查：全仓库检索不再出现对 `AGENTS.md`/`NOTE.md`/`AGENTS-EDIT.md` 的导向引用（历史记录内容除外）。
- 后续建议：
  - 后续只维护 `.ai/*`，根目录不再新增/恢复同名提示词文件，避免分叉。

## [2026-01-03] 提示词系统迁移到 `.ai`
- 背景/需求：将根目录旧提示词文档（`NOTE.md`/`AGENTS-EDIT.md`/`AGENTS.md`）迁移到新的 `.ai` 提示词系统，统一入口与工作流程，避免重复维护。
- 修改类型：docs
- 影响范围：AI 提示词 / 文档工作流
- 变更摘要：
  1) `.ai/PROJECT_MEMORY.md` 合并并承载原 `NOTE.md` 的技术手册内容，并在文件顶部追加迁移说明。
  2) `.ai/CHANGELOG_AI.md` 保留“新增记录模板”，并在下方追加原 `AGENTS-EDIT.md` 的历史记录（保留原版本格式）。
  3) 根目录 `AGENTS.md` 更新为新的入口规则，明确“先读 `.ai/README.md`”。
  4) 根目录 `NOTE.md` 与 `AGENTS-EDIT.md` 改为跳转说明，避免双份文档产生分歧。
- 涉及文件：
  - `AGENTS.md`
  - `NOTE.md`
  - `AGENTS-EDIT.md`
  - `.ai/README.md`
  - `.ai/PROJECT_MEMORY.md`
  - `.ai/CHANGELOG_AI.md`
- 检索与复用策略：
  - 检索关键词：`AGENTS.md` / `NOTE.md` / `AGENTS-EDIT.md` / `.ai` / `PROJECT_MEMORY` / `CHANGELOG_AI`
  - 找到的旧实现：根目录 `AGENTS.md`（旧工作流程）、`NOTE.md`（技术手册）、`AGENTS-EDIT.md`（AI 版本日志）
  - 最终选择：复用并迁移（新系统承载，旧文件保留跳转），避免重复维护
- 风险点：
  - 若存在脚本/文档硬编码读取 `NOTE.md`/`AGENTS-EDIT.md`，将只读到跳转说明（但不会“找不到文件”）；需要时改为读取 `.ai/PROJECT_MEMORY.md` / `.ai/CHANGELOG_AI.md`。
  - `.ai/CHANGELOG_AI.md` 体积增大（包含历史迁移内容），建议后续只在文件顶部追加新记录。
- 验证方式：
  - 人工检查：确认 `.ai/README.md` 的入口规则与根目录 `AGENTS.md` 一致；确认迁移文件包含原内容；确认旧文件已改为跳转说明。
- 后续建议：
  - 新增/调整提示词规则只维护 `.ai/*`，避免再回写根目录旧文件。

---

## 模板（新增记录按此格式）
## [YYYY-MM-DD] <变更标题>
- 背景/需求：
- 修改类型：feat / fix / refactor / docs
- 影响范围：A业务 / B业务 / 公共模块 / 数据模型
- 变更摘要：
  1) ...
  2) ...
- 涉及文件：
  - `/path/file1`
  - `/path/file2`
- 检索与复用策略：
  - 检索关键词：
  - 找到的旧实现：
  - 最终选择：复用/修改/新建（说明原因）
- 风险点：
  - ...
- 验证方式：
  - ...
- 后续建议：
  - ...

---
## 历史迁移（来自 AGENTS-EDIT.md，保留原版本格式）
 ## V1.2.1 (2025-11-24)
  - **后端**：PostService 在创建/更新文章时补齐 created_at/updated_at/published_at，避免因时间戳为空导致数据库约束失败。
  - **文章内容**：ArticleDetail 会自动把 Markdown/HTML 中的相对图片地址映射到 `/uploads/<slug>/...`，确保上传的图像能正确
    渲染。
  - **版本**：首页 Banner 更新为 SANGUI BLOG // V1.2.1。

## V1.1.37 (2025-11-23)
- **标签分页搜索**: `/admin/taxonomy` 新增模糊搜索与分页控件，可按名称/slug 查询，每页 5/10/20/50 条灵活切换。
- **API 扩展**: `/api/admin/tags` 支持 `keyword/page/size` 参数并返回 `PageResponse`，后端通过 `Pageable` + `findByNameContainingIgnoreCaseOrSlugContainingIgnoreCase` 实现模糊匹配。
- **提升**: 删除标签时自动调整页码，创建/查询会置回第一页。首页 Banner 更新为 `SANGUI BLOG // V1.1.37`。

## V1.1.38 (2025-11-23)
- **分类管理页**: 新增后台“二级分类”页面，可增删改查分类、行内编辑父级与排序、分页展示并提供模糊搜索/父级筛选。
- **后端支持**: `/api/admin/categories` 新增 CRUD + 分页搜索接口，限制只有管理员可用，并强制仅两级结构（父级必须为一级分类）。
- **共享**: `CategoryService` 扩展 slug 自动生成、唯一性校验及删除保护；前端 API 同步扩展。首页版本号更新为 `SANGUI BLOG // V1.1.38`。

## V1.1.39 (2025-11-23)
- **文章管理页**: `/admin/posts` 新增文章列表视图，支持分页/搜索/分类筛选，行内编辑标题、Slug、状态、摘要、颜色、分类与标签。
- **后端扩展**: 新建 `/api/admin/posts` 接口及 `PostAdminDto`/`AdminPostUpdateRequest`，`PostService` 提供分页查询和基础元数据更新并校验 slug、分类、标签。
- **前端 API**: `api.js` 增加文章管理请求，AdminPanel Tab 改为真实的 PostsView。首页 Banner 更新为 `SANGUI BLOG // V1.1.39`。

## V1.1.40 (2025-11-23)
- **修复**: 文章管理页缺少 `adminFetchPosts`/`adminUpdatePost` 引入导致页面空白，现补充 API 引用并刷新 Banner 为 `SANGUI BLOG // V1.1.40`。

## V1.1.41 (2025-11-23)
- **文章管理优化**: 仅展示二级分类供选择（下拉标记“一级/二级”），禁止设置为一级分类；分类列显示为 `一级/二级`，状态列改为中文（草稿/已发布/已归档），表格原 `Slug` 列改为“摘要”。
- **交互细节**: 编辑态在标题单元格内附加 `Slug` 与主题色输入，分页默认按发布时间降序；`PostAdminDto` 增补父级名称，便于展示。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.41`。

## V1.1.42 (2025-11-23)
- **个人资料页重构**: 重新设计后台个人资料 UI，增加深色模式适配、完整的只读信息、改良的密码验证流程、头像实时上传并落库、社交字段与 Bio 输入体验。
- **导航联动**: 顶部头像点击直接跳转到 `/admin/profile`，方便随时进入资料页。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.42`。

## V1.1.43 (2025-11-23)
- **资料页修复**: 头像上传结果改为读取后端返回的 `url` 并立即写入资料，邮箱/微信字段完整展示且提供二维码预览。
- **密码校验**: 后端 `updateProfile` 增加原密码验证与 `verifyOnly` 模式，前端调用改为 camelCase，只有验证通过才能设置新密码。
- **只读信息**: DTO 现返回邮箱、创建时间、上次登录等元数据，页面在深色模式下正常展示。版本号更新为 `SANGUI BLOG // V1.1.43`。

## V1.1.44 (2025-11-23)
- **资料页精简**: 移除微信二维码字段，保留 GitHub/Bio 等核心信息，头像上传改为读取 `data.url` 并即时生效。
- **提示优化**: 通用状态信息会滚动到视区内，密码验证提示紧邻密码区域，白天模式的只读卡片使用纯白底色以提升对比度。
- **后端增强**: `updateProfile` 支持用户名/邮箱更新与密码验证分支，响应中返回邮箱及时间元数据。首页版本号更新为 `SANGUI BLOG // V1.1.44`。

## V1.1.45 (2025-11-23)
- **头像策略**: 上传接口改为写入 `static/avatar` 并仅在数据库存储文件名，更新头像时自动删除旧文件。
- **只读信息可见性**: 资料页的只读字段在日间模式下改为黑色字体，避免白底白字无法查看。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.45`。

## V1.1.46 (2025-11-23)
- **首页信息**: 作者卡片展示 `bio`，微信二维码统一指向后端 `static/contact/wechat.jpg`，不再出现 Mock 图片。
- **媒体助手**: 新增 `buildMediaUrl` 供头像/二维码复用，自动补齐 `http://localhost:8080` 前缀。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.46`。

## V1.1.47 (2025-11-23)
- **二维码修正**: 首页作者卡片彻底改为使用后端 `contact/wechat.jpg`，不再尝试加载 Mock 链接，避免闪烁。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.47`。

## V1.1.48 (2025-11-23)
- **文章卡片数据源**: 首页列表将原“爱心”指标改为浏览量（Eye 图标），并直接展示后端返回的 `viewsCount`；评论数同样读取 `commentsCount`，确保与数据库一致。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.48`。

## V1.1.49 (2025-11-23)
- **评论统计**: 后端 `PostService` 通过 `commentRepository.countByPostIdAndStatus` 获取真实评论数量（仅统计批准评论），解决文章列表显示不准的问题。
- **版本**: 首页 Banner 更新为 `SANGUI BLOG // V1.1.49`。

## V1.1.36 (2025-11-23)
- **功能**: 后台“分类标签”页实现标签管理界面，可新增、编辑、删除并刷新真实接口数据，支持行内编辑/保存与输入校验。
- **后端**: 新增 `/api/admin/tags` CRUD 接口与 `TagRequest` DTO，强化唯一性校验及 slug 自动生成，同时在 `SecurityConfig` 中限制为管理员可用。
- **前端**: `api.js` 扩展标签管理 API，`AdminPanel` 路由新增 `TaxonomyView`，UI 采用卡片 + 表格呈现标签详情。首页 Banner 更新为 `SANGUI BLOG // V1.1.36`。

## V1.1.35 (2025-11-23)
- **修复**: `api.js` 的通用请求方法在抛错时附带 `status`，`checkAuth` 只在后端返回 `401` 时才清理本地 Token，避免页面频繁刷新时因偶发网络错误而被误判为未登录。
- **更新**: 首页 Banner 版本号为 `SANGUI BLOG // V1.1.35`，以记录本次认证行为修复。

## V1.1.34 (2025-11-23)
- **修复**: 重新初始化标题 slug 映射，避免组件多次渲染后生成 `xxx-2` 之类的随机 ID；并在目录跳转找不到目标时回退到原始 `#标题`，确保锚点永远可用。
- **更新**: 首页 Banner 改为 `SANGUI BLOG // V1.1.34`。

## V1.1.33 (2025-11-23)
- **修复**: 在 `AppFull.jsx` 中为 Markdown 标题注入锚点 ID 的同时，拦截目录链接（`href="#xxx"`）点击行为，若未匹配到原文 ID 会自动尝试 slug 版本，确保 `[标题](#标题)` 可稳定滚动定位。
- **更新**: 首页 Banner 版本号刷新为 `SANGUI BLOG // V1.1.33`。

## V1.1.32 (2025-11-23)
- **优化**: 为 `ReactMarkdown` 的所有标题节点自动生成锚点 `id`（兼容中文），并处理同名标题的去重逻辑，确保 Markdown 目录链接如 `[标题](#标题)` 可正确定位。
- **UI**: 首页 Banner 版本号更新为 `SANGUI BLOG // V1.1.32`，与 Markdown 渲染能力提升保持同步。

## V1.1.31 (2025-11-23)
- **优化**: 评论区新增“两层楼”限制，仅允许针对顶级评论进行回复，超出层级自动隐藏“回复”按钮，避免过深嵌套导致阅读困难。
- **更新**: Hero Banner 版本号刷新为 `SANGUI BLOG // V1.1.31`，与本次交互策略保持一致。

## V1.1.30 (2025-11-23)
- **新增**: 评论区支持楼中楼交互。新增“回复”输入框、嵌套渲染与评论总数统计，用户可针对任意评论进行多级回复。
- **联动**: `useBlogData` 的增删改操作改为完成后自动重新拉取 `/comments` 列表，确保前端树形结构实时映射后端 `parent_comment_id` 数据。
- **文档**: `NOTE.md` 补充了评论树渲染流程，并标注 `sanguiblog_db.sql` 内含带 `parent_comment_id` 的测试数据。首页 Banner 版本号更新为 `SANGUI BLOG // V1.1.30`。

## V1.1.29 (2025-11-23)
- **新增**: 文章详情页通过 `remark-math` + `rehype-katex` 支持 LaTeX 数学公式渲染，`rehype-raw` 允许渲染 Markdown 中的自定义 HTML（如 `<p style="color:red">`）。
- **更新**: 在 `AppFull.jsx` 中引入 KaTeX 样式并配置 ReactMarkdown 插件链，确保数学公式与 HTML 正常展示。
- **版本**: 首页 Banner 版本号更新为 `SANGUI BLOG // V1.1.29`。

## V1.1.28 (2025-11-23)
- **修复**: 扩展 `SecurityConfig` 的跨域白名单，新增 `http://localhost:5174` 与 `http://127.0.0.1:5174`，确保结构管理浏览器在 5174 端口运行时能正常访问后端接口。
- **更新**: 首页 Banner 版本号改为 `SANGUI BLOG // V1.1.28`。

## V1.1.27 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中因组件删除操作不当导致的严重 JSX 语法错误。
    - **原因**: 在删除重复的 `CommentsSection` 和 `ArticleDetail` 组件时，意外删除了 `Hero` 组件的闭合标签（`</section>`, `</>`, `);`, `};`）以及 `LoginView` 组件的定义头和状态 Hook（`const LoginView = ...`, `useState`）。
    - **解决**: 恢复了丢失的 `Hero` 组件闭合标签和 `LoginView` 组件的完整定义，确保页面能正常渲染且无语法报错。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.27`。

## V1.1.26 (2025-11-23)
- **修复**: 再次修复 `AppFull.jsx` 中 `CommentsSection` 和 `ArticleDetail` 组件重复声明的错误。
    - **原因**: 上一次修复尝试未能正确删除文件末尾的冗余代码，导致 `Identifier 'CommentsSection' has already been declared` 错误持续存在。
    - **解决**: 彻底删除了文件末尾（行 1699-2111）的旧版本组件定义，确保全局只有一份包含最新功能（“博主”徽章）的组件代码。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.26`。

## V1.1.25 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中 `CommentsSection` 和 `ArticleDetail` 组件重复声明的错误。
    - **原因**: 在上一次更新中，代码替换操作意外地在文件末尾追加了这两个组件的旧版本定义，导致与文件中部的新版本定义冲突，引发 `Identifier 'CommentsSection' has already been declared` 报错。
    - **解决**: 删除了文件末尾多余的重复组件定义，保留了包含“博主”徽章逻辑的正确版本。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.25`。

## V1.1.24 (2025-11-23)
- **UI 优化**: 
    - 将文章详情页作者卡片中的默认头衔从英文 "CONTRIBUTOR" 改为中文 "**博主**"。
    - **评论区增强**: 新增了博主身份标识功能。
        - 当评论发布者为文章作者时，其名字旁会显示一个带有 **PenTool** 图标和“**博主**”文字的专属 Badge（徽章）。
        - 徽章样式遵循 Neo-Brutalism 风格（粗边框、阴影、高亮背景），与全站设计语言保持一致。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.24`。

## V1.1.23 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中因 UI 回滚操作不当导致的 JSX 语法错误（`Expected corresponding JSX closing tag for <div>`）。
    - **原因**: 在将作者卡片回滚为简约风格时，替换操作意外覆盖了文章元数据区的结束标签和 `article` 容器的开始标签，导致 DOM 结构断裂。
    - **解决**: 恢复了丢失的“阅读量”元数据显示、元数据区闭合标签、简约版作者卡片以及 `article` 容器的正确包裹结构。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.23`。

## V1.1.22 (2025-11-23)
- **回滚**: 响应用户反馈，将文章详情页的 **作者信息卡片 (Author Card)** 回滚到之前的简约风格。
    - 用户认为新的 Neo-Brutalism 风格卡片过于复杂（"太丑了"），更倾向于之前的“空荡荡”的简约设计。
    - **保留功能**: 尽管 UI 回滚，但 **分享功能**（复制链接 + Toast 提示）和 **作者头衔 Badge** 样式被保留。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.22`。

## V1.1.21 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中的 JSX 语法错误（`Expected corresponding JSX closing tag for <div>`）。
    - **原因**: 在上一次重构作者卡片时，自动替换工具未能正确识别代码块边界，导致文章元数据区域（Metadata）与正文内容（Content）的标签嵌套错乱，丢失了 `</article>` 闭合标签和作者卡片代码。
    - **解决**: 重新构建了 `ArticleDetail` 组件的核心渲染部分，严格按顺序恢复了 `Metadata` -> `Author Card` -> `Article Content` 的结构，并确保所有 JSX 标签正确闭合。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.21`。

## V1.1.20 (2025-11-23)
- **修复**: 修复了点击分享按钮时导致的白屏崩溃问题（`ReferenceError: CheckCircle is not defined`）。
    - **原因**: 在实现分享 Toast 弹窗时，使用了 `CheckCircle` 图标但忘记从 `lucide-react` 库中导入。
    - **解决**: 在 `AppFull.jsx` 头部添加了 `CheckCircle` 的导入。
- **UI 重构**: 全面重新设计了文章详情页的 **作者信息卡片 (Author Card)**。
    - **新样式**: 采用了更丰富的 Neo-Brutalism 风格卡片，包含粗边框、阴影和装饰性标签。
    - **内容增强**:
        - **头像**: 增大尺寸并添加了在线状态指示器。
        - **简介**: 新增了作者简介（Bio）显示区域（支持默认文案回退）。
        - **数据**: 新增了模拟的“文章数”和“粉丝数”统计，增加页面活跃感。
        - **操作**: 集成了 **FOLLOW**（关注）、**SHARE**（分享）和 **Github** 按钮，操作区更集中。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.20`。

## V1.1.19 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中 `ArticleDetail` 组件的严重语法错误。
    - **原因**: 上一次更新分享功能时，代码替换出现错误，导致 JSX 结构被破坏，出现了 `Unexpected token` 报错。
    - **解决**: 完整重写了 `ArticleDetail` 组件，确保所有功能（头像、分享、Markdown 渲染）和语法结构正确无误。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.19`。

## V1.1.18 (2025-11-23)
- **文档**: 更新了 `NOTE.md`，详细记录了头像显示的完整技术逻辑（数据源、URL 解析、回退机制、后端配置）。
- **优化**: 重新设计了文章详情页作者头衔（Title）的显示样式。
    - 将原先普通的文本改为具有波普/新粗野主义风格的 **Badge（徽章）** 样式（粗边框、阴影、高亮背景），与全站风格保持一致。
    - 默认显示 `AUTHOR`，或显示用户的自定义头衔。
- **功能**: 实现了文章详情页的 **分享功能**。
    - 点击分享按钮现在会将当前页面 URL 复制到剪贴板。
    - 增加了一个风格化的 **Toast 弹窗**（粗边框、阴影、动画），提示用户“链接已复制”。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.18`。

## V1.1.17 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中的 `'return' outside of function` 报错。
    - **原因**: 在上一次修复语法错误时，误删了 `getAvatarUrl` 函数的定义行，导致函数体代码直接暴露在组件中，使组件提前返回并导致后续代码脱离函数作用域。
    - **解决**: 恢复了 `const getAvatarUrl = (avatarPath) => {` 函数定义行。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.17`。

## V1.1.16 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中的语法错误（`Unexpected token`）。
    - **原因**: 在上一次修复头像逻辑时，代码替换操作不当，导致 `ArticleDetail` 组件中出现了一个多余的 `return (` 语句，破坏了函数结构。
    - **解决**: 删除了多余的 `return (`，恢复了正确的组件结构。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.16`。

## V1.1.15 (2025-11-23)
- **修复**: 再次修复文章详情页作者头像显示为“破损图片”的问题。
    - **原因**: 数据库中存储的旧头像路径（如 `/sangui.jpg`）不包含 `/avatar` 前缀，直接拼接 `http://localhost:8080` 导致 404 错误。且之前的简化逻辑移除了 `onError` 处理，导致加载失败时无法回退到 Mock 头像。
    - **解决**:
        1.  重新引入了 `getAvatarUrl` 辅助函数，增加了智能路径修正逻辑：如果路径不以 `/uploads/` 或 `/avatar/` 开头，自动添加 `/avatar` 前缀。
        2.  在 `img` 标签中重新添加了 `onError` 事件处理，确保在图片加载失败（404）时能自动回退到 `MOCK_USER.avatar`。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.15`。

## V1.1.14 (2025-11-23)
- **修复**: 修复了文章详情页 `ReferenceError: contentMd is not defined` 报错。
    - **原因**: 在上一次重构头像逻辑时，意外删除了 `contentMd` 及其他样式变量（如 `text`, `surface`, `quoteBg` 等）的定义。
    - **解决**: 恢复了所有丢失的变量定义，确保文章详情页能正常渲染 Markdown 内容及样式。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.14`。

## V1.1.13 (2025-11-23)
- **修复**: 彻底修复文章详情页作者头像显示问题。
    - **原因**: 之前的 `getAvatarUrl` 辅助函数逻辑过于复杂且可能存在判断漏洞，导致部分头像路径无法正确解析。
    - **解决**: 弃用了 `getAvatarUrl` 函数，直接采用了与 `CommentsSection` 和 `Navbar` 完全一致的内联渲染逻辑。
        - 如果头像路径以 `http` 开头，直接使用。
        - 如果有头像路径但非 `http`，自动拼接 `http://localhost:8080` 前缀。
        - 如果无头像路径，回退显示默认 Mock 头像。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.13`。

## V1.1.12 (2025-11-23)
- **修复**: 进一步修复静态资源头像显示问题。
    - **原因**: 虽然 Spring Boot 默认映射了 `static` 目录，但在某些部署环境或配置下，默认映射可能不生效或被覆盖。
    - **解决**: 在 `WebConfig` 中显式添加了 `/avatar/**` 到 `classpath:/static/avatar/` 的映射，确保无论环境如何，头像路径都能正确解析。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.12`。

## V1.1.11 (2025-11-23)
- **修复**: 修复了静态资源头像（如 `/sangui.jpg`）无法显示的问题。
    - **原因**: 数据库中存储的旧头像路径为 `/filename.jpg`，而实际文件位于后端的 `static/avatar/` 目录下，直接访问 `/filename.jpg` 会导致 404。
    - **解决**: 更新了前端 `AppFull.jsx` 中的 `getAvatarUrl` 逻辑。现在，对于以 `/` 开头且不包含 `/avatar/` 或 `/uploads/` 的路径，会自动添加 `/avatar` 前缀，将其转换为正确的 URL（如 `http://localhost:8080/avatar/sangui.jpg`）。
- **文档**: 更新了 `NOTE.md`，详细说明了静态资源与头像的存储规则及 URL 映射逻辑。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.11`。

## V1.1.10 (2025-11-23)
- **新增**: 后端新增头像上传与静态资源服务功能。
    - 创建 `UploadController`，提供 `/api/upload/avatar` 接口用于上传头像。
    - 创建 `WebConfig`，配置静态资源映射，将 `/uploads/**` 路径映射到本地 `uploads/` 目录，确保上传的图片可以被访问。
    - 更新 `SecurityConfig`，允许公开访问 `/uploads/**` 路径，并允许认证用户访问上传接口。
- **修复**: 解决了本地存储的头像无法显示的问题（此前因缺少静态资源映射导致 404）。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.10`。

## V1.1.9 (2025-11-23)
- **修复**: 修复了文章详情页中元数据（发布时间、阅读时长、字数）丢失的问题。
    - 在 `ArticleDetail` 组件中重新添加了元数据展示区域。
    - 确保 `date` 从 `post` 对象读取，`readingTime` 和 `wordCount` 从 `articleData` 对象读取。
- **修复**: 增强了作者头像的显示逻辑。
    - 确保在 `post.authorAvatar` 为空时能正确回退到默认头像。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.9`。

## V1.1.8 (2025-11-23)
- **修复**: 再次修复文章详情页数据映射错误。
    - 发现上一次修复的代码未正确应用，导致错误的“标准化”逻辑依然存在。
    - 重新应用了简化后的数据映射逻辑，直接使用 `articleData.summary` 中的字段，移除了所有可能导致默认值（如“首页”、“Unknown”）的错误判断。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.8`。

## V1.1.7 (2025-11-23)
- **修复**: 再次修复文章详情页数据映射错误。
    - 修正了 `ArticleDetail` 组件获取文章元数据（`summary`）的逻辑。
    - 明确了后端 API 返回的是扁平化的 `PostSummaryDto`，移除了错误的多余标准化逻辑，确保 `category`、`authorName`、`excerpt` 等字段能正确从 `articleData.summary` 中读取。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.7`。

## V1.1.6 (2025-11-23)
- **修复**: 修复了文章详情页中分类、作者名、发布时间等信息丢失的问题。
    - 原因：后端 API 返回的原始数据结构（嵌套对象）与前端组件预期的扁平化结构不一致。
    - 解决：在 `ArticleDetail` 组件中增加了数据标准化（Normalization）逻辑，将 `post.category.name` 映射为 `category`，`post.author.displayName` 映射为 `authorName` 等，确保 UI 正确渲染。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.6`。

## V1.1.5 (2025-11-23)
- **修复**: 彻底修复了 `ArticleDetail` 组件的结构问题。
    - 恢复了意外丢失的“作者信息栏”（头像、作者名、分享按钮）。
    - 修正了 DOM 嵌套结构，确保 `article` 和 `CommentsSection` 正确包裹在主卡片容器内，解决了布局错乱和 JSX 闭合标签报错的问题。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.5`。

## V1.1.4 (2025-11-23)
- **修复**: 修复了 `AppFull.jsx` 中 `ArticleDetail` 组件的 JSX 语法错误（多余的闭合标签 `</div>`），解决了前端编译报错的问题。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.4`。

## V1.1.3 (2025-11-23)
- **修复**: 文章详情页作者头像显示异常的问题。
    - 修改了 `ArticleDetail` 组件，优先使用 `articleData` 中的真实数据。
    - 增加了对 `post.author.avatarUrl` 字段的支持，正确解析数据库返回的头像路径。
    - 统一了头像 URL 的处理逻辑（处理相对路径 `http://localhost:8080` 前缀）。
- **更新**: 将首页版本号更新为 `SANGUI BLOG // V1.1.3`。

## V1.1.2 (2025-11-22)
- **紧急广播操作简化**：后台设置区去掉“保存内容”按钮，点击“开启/关闭”即会立即写入最新内容与状态并提示结果。
- **Markdown 行内代码优化**：文章详情页重新调整 `code` 渲染策略，普通 `` `code` `` 文本保持与段落同行，仅多行或显式语言块会单独换行。
- **版本号刷新**：首页 Banner 版本号更新为 `SANGUI BLOG // V1.1.2`。

## V1.1.1 (2025-11-22)
- **紧急广播联动数据库**：后台的开关按钮现在可以直接切换状态并调用统一接口，保存时通过封装的 updateBroadcast API 写入数据库，避免只改前端本地状态的情况。
- **Markdown 渲染增强**：文章详情页改用 ReactMarkdown + GFM 解析 contentMd，并针对行内/块级代码做了样式处理，原先 `  ` 等符号无法正确渲染的问题已消失。
- **版本号更新**：首页 Banner 显示为 SANGUI BLOG // V1.1.1。

## V1.1.0 (2023-11-21)

- **功能增强**：后台管理界面的“紧急广播设置”现已与数据库连通。管理员可以实时更新广播内容和开关状态，前端会自动同步。
- **Bug修复**：修复了文章详情页 Markdown 内容无法正确渲染的问题。现在后端会自动将 Markdown 转换为 HTML 并返回给前端。
- **版本更新**：首页版本号更新为 V1.1.0。

## V1.0.2 (2025-11-21)

本次更新包含以下内容：
1. **修复 Unicode 乱码**：修复了后台管理界面（Admin Panel）中剩余的 Unicode 转义字符（如 `\u7d27\u6025...`），现在所有中文文案均正常显示。
2. **修复微信二维码显示**：
   - 将微信二维码图片从后端资源目录 `SanguiBlog-server/src/main/resources/static/contact/wechat.jpg` 复制到了前端公共目录 `SanguiBlog-front/public/contact/wechat.jpg`。
   - 更新了前端代码中的图片引用路径为 `/contact/wechat.jpg`。
   - 解决了在后端未启动或跨域情况下图片无法显示的问题。
3. **版本号更新**：首页显示为 `SANGUI BLOG // V1.0.2`。

## V1.0.1 (2025-11-21)
本次更新包含以下内容：
1. **后台文案汉化**：修复了后台管理界面（Admin Panel）中的中文乱码和占位符，将 Dashboard、Analytics、Create Post 等页面的英文/占位符替换为正确的中文文案。
2. **版本号更新**：首页显示为 `SANGUI BLOG // V1.0.1`。

## V1.0.0 (2025-11-21)
本次更新包含以下内容：
1. **修复微信二维码显示问题**：修正了前端硬编码的图片路径，现在正确指向后端静态资源 `http://localhost:8080/contact/wechat.jpg`。
2. **优化点击波纹动画**：将点击坐标获取方式从 `pageX/pageY` 改为 `clientX/clientY`，解决了动画跟随鼠标滞后/偏移的问题，提升了交互手感。
3. **更新版本标识**：首页 Banner 文字已更新为 `SANGUI BLOG // V1.0.0`。
4. **代码维护**：修复了 `AppFull.jsx` 中的 JSX 语法错误（多余的闭合标签）。
## V1.1.49 (2025-11-23)
- **????**??? PostService ?? commentRepository.countByPostIdAndStatus ????????????????????????????????
- **??**??? Banner ??? SANGUI BLOG // V1.1.49?

## V1.1.50 (2025-11-23)
- **????**????? PostService ?????????????????
- **????**???????????????????????????
- **??**??? Banner ??? SANGUI BLOG // V1.1.50?

## V1.2.0 (2025-11-24)
- **??**??? PostAssetService ? /api/upload/post-assets/
eserve ???slug ????????????????? /uploads/posts/<slug>/ ???????
- **??**??? /admin/create-post???????????????Markdown ?????????????????????????
- **??**?NOTE.md ??????????????????????????????
- **??**??? Banner ??? SANGUI BLOG // V1.2.0?

## V1.2.1 (2025-11-24)
- **??**?PostService ???/??????? created_at/updated_at/published_at???????????????????
- **??**??? Banner ??? SANGUI BLOG // V1.2.1?

## V1.2.2 (2025-11-24)
- **????**???????????????????Markdown ?? .assets ????????? slug ?????????????????
- **????**?ArticleDetail ? Markdown ? HTML ??????????????????? /uploads/<slug>/...???????????????????????????
- **??**??? Banner ??? SANGUI BLOG // V1.2.2?

## V1.2.3 (2025-11-24)
- **????**???????????????????.assets ??????????????????????
- **????**???? Markdown/HTML ????????? slug ?? /uploads/<slug>/... ????????????? 404?
- **??**??? Banner ??? SANGUI BLOG // V1.2.3?

## V1.2.4 (2025-11-24)
- **????**?????????????? .assets ???????????????????????? Markdown ??????????????
- **????**??????? slug ?? /uploads/<slug>/...???????????????? Markdown ???
- **??**??? Banner ??? SANGUI BLOG // V1.2.4?

## V1.2.5 (2025-11-24)
- **后端**：`/api/upload/post-assets` 改为按 slug 追加图片并返回 `files`、`urls` 与分号拼接的 `joined` 字符串，方便直接粘贴入数据库字段且不会误删已有资源。
- **前端**：后台发布页移除“文件夹上传”，新增“插入图片”按钮与光标注入逻辑，同时在侧栏展示资源 slug 提示，图片上传后即可写入 Markdown。
- **文档**：同步更新 NOTE.md，描述新的发布流程及静态资源策略，强调 joined 用法。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.5`。

## V1.2.9 (2025-11-24)
- **后端**：新增 `AdminPostDetailDto` 及 `/api/admin/posts/{id}`，后台可读取任意文章的 Markdown、分类与标签元数据，继续复用 `SavePostRequest` 保障 slug 唯一性。
- **前端**：`PostsView` 改为跳转新建的 `EditPostView`，该页面支持独立选择文章、复用发布模板编辑正文/元信息，并保留 Markdown 上传、插图与分类标签选择。
- **文档**：NOTE.md “3.5 后台文章管理” 描述新的编辑流程与接口依赖。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.9`。

## V1.2.10 (2025-11-24)
- **前端**：修复文章列表与后台编辑页的中文文案乱码问题，包含分页提示、筛选占位符、表头及按钮文本，确保切换到新编辑页后的全部提示均正确显示。
- **前端**：`AnalyticsView` 标题及版本 Banner 更新为可读中文，避免再次出现 `????` 等占位字符。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.10`。

## V1.2.11 (2025-11-24)
- **前端**：后台发布页新增主题色选择器，支持自由取色及 6 个预设颜色（含 bg-[#00E096]、bg-[#6366F1]、bg-[#FF0080] 等），创建文章时可直接写入 `theme_color`。
- **前端**：文章编辑页复用同一选择器，方便修改现有文章的主题色并即时预览。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.11`。

## V1.2.12 (2025-11-24)
- **后端**：新增 `/api/admin/users` 全量 CRUD 及角色列表接口，`AdminUserService` 负责校验用户名/邮箱唯一、分配角色并对密码做加密存储。
- **前端**：AdminPanel 新增“用户管理”页面，可对账号进行增删改查、直接切换角色并重置密码，同时延续只读信息卡片的展示方式。
- **文档**：NOTE.md 增补“3.8 用户管理”说明后台表单行为与接口，便于后续扩展。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.12`。

## V1.2.13 (2025-11-24)
- **修复**：用户管理页的所有中文文案恢复正常显示，并在选择用户后自动滚动到编辑表单，避免手动滑动。
- **体验**：角色与状态下拉、表格标题、分页提示及确认提示改为中文，可明确告知操作含义。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.13`。

## V1.2.15 (2025-11-24)
- **前端**：`/admin/users` 的关键词与角色筛选现在使用请求令牌防抖，旧请求结果不再覆盖最新筛选，列表会稳定展示筛选后的数据。
- **后端**：`PostService#getAdminDetail` 抛出的“文章不存在”提示改为纯中文，彻底消除异常信息中的乱码。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.15`。

## V1.2.16 (2025-11-24)
- **前端**：用户管理页的“新建用户”按钮会自动平滑滚动到表单区域，便于立即填写；关键词与角色筛选完全依托后端分页，总数与翻页在筛选后依旧准确可用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.16`。

## V1.2.17 (2025-11-24)
- **前端**：首页二级分类导航下方新增“全部标签”展示区，自动汇总站内所有标签并以粗野主义徽章样式呈现，方便访客快速了解内容热点。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.17`。

## V1.2.18 (2025-11-24)
- **前端**：`useBlogData` 新增标签数据源，首页“全部标签”区域改为读取真实接口返回的完整标签列表，避免仅显示当前分页文章中的少量标签。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.18`。

## V1.2.19 (2025-11-24)
- **前端**：首页标签区下方新增“最新评论”卡片，展示最近 5 条经审核的评论，包含作者、时间、内容和跳转文章按钮，突出社区活跃度。
- **后端**：新增 `GET /api/comments/recent?size=5` 接口及 `CommentDto` 扩展字段（postId/postTitle/postSlug），`useBlogData` 会在初始化和评论增删改后自动刷新该列表。
- **文档**：NOTE.md “4.5 评论与楼中楼” 补充了 `recent` 接口说明，确保未来开发了解数据来源。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.19`。

## V1.2.20 (2025-11-25)
- **前端**：首页“全部标签”区域默认收起，仅展示 9 个标签徽章，并新增“展开全部/收起标签”按钮以保持视觉节奏，同时仍可查看完整标签列表。
- **前端**：最新评论卡片去除跳转按钮，改为将评论正文本身作为交互入口，hover 则提示所属文章，点击可定位到文章详情里的对应评论并自动高亮 3 秒。
- **文档**：NOTE.md “4.5 评论与楼中楼” 补充最新评论跳转与高亮逻辑，帮助后续维护理解锚点策略。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.20`。

## V1.2.21 (2025-11-25)
- **前端**：文章卡片不再依赖 `whileInView` 才进入视口，刷新页面位于文章区时也能立即看到列表，避免“需要先滚动到顶部再滚回”才能显示的空白问题。
- **前端**：回到顶部按钮支持拖拽定位并将坐标写入 `localStorage`，下次访问会保持自定义位置，同时在拖动后不会误触发回到顶部。
- **前端**：最新评论跳转携带评论 ID 或回退到评论区顶部，`CommentsSection` 在加载后自动滚动并高亮目标，确保点击后直接查看对应讨论。
- **文档**：NOTE.md “4.5 评论与楼中楼” 补充了最新评论缺少 ID 时的回退逻辑说明。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.21`。

## V1.2.22 (2025-11-25)
- **前端**：最新评论卡片移除黄色提示条，hover 仅保留原有 `title` 提示；点击后直接跳转至文章顶部，避免滚动到具体评论失败的体验。
- **前端**：评论模块恢复普通渲染逻辑，去除无用的锚点高亮；文章卡片点击也不再携带额外状态，整体行为更自然。
- **构建**：`.gitignore` 增补前端构建缓存、环境文件与服务器端目标目录的忽略配置，避免误提交体积较大的产物。
- **文档**：README.md 重写为部署手册，NOTE.md 同步描述最新评论的跳转策略。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.22`。

## V1.2.23 (2025-11-25)
- **前端**：夜间模式下的一级分类按钮采用金色边框+黑色文字，最新评论与全部标签标题也统一为白色，保证暗色背景下可读性。
- **前端**：文章详情中的所有图片都支持点击预览大图（含 Markdown 与 HTML 渲染内容），配合遮罩层与滚动锁定，改善长图阅读体验。
- **交互**：最新评论点击后滚动至文章顶部，同时文章视图切换时自动回到页面开头，避免暗色模式下的留白误差。
- **文档**：NOTE.md 记录图片预览与最新评论跳转策略，方便后续接手者理解行为。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.23`。

## V1.2.24 (2025-11-25)
- **修复**：`handleImagePreview` 在定义前被 `useEffect` 调用导致文章页崩溃，现将预览回调上移并确保依赖正确，点击文章即可正常进入。
- **前端**：暗色主题下的一级分类 hover 样式不再变成浅灰色，维持深色底与白色文字，避免与背景撞色。
- **体验**：完善图片预览遮罩的滚动锁定逻辑，关闭遮罩即可恢复页面滚动。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.24`。

## V1.2.25 (2025-11-26)
- **后端**：`SecurityConfig` 将 `/api/comments/**` 加入匿名访问白名单，`/api/comments/recent` 不再要求登录，首页访客也能看到最新评论。
- **前端**：更新首页 Banner 版本文案为 `SANGUI BLOG // V1.2.25`，确保显示版本与本次修复保持一致。
- **文档**：NOTE.md “4.5 评论与楼中楼” 补充最新评论接口的安全策略，提醒只放开读取权限，写操作仍由 `/api/posts/**` 权限控制。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.25`。

## V1.2.26 (2025-11-26)
- **前端**：首页文章卡片在最近 7 天内发布的内容旁新增 “NEW” 闪动徽章，基于 `post.date` 自动判断，让访客快速识别新文章。
- **前端**：后台 `/admin/posts` 列表去掉标题下方的 Slug 文本，并按照“已发布/草稿/已归档”分别涂抹绿色、琥珀色、灰色底纹，管理员无需额外点击即可区分状态。
- **文档**：NOTE.md 在“3.2 前端架构”“3.5 后台文章管理”补充以上前端行为，方便后续维护遵循同一逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.26`。

## V1.2.27 (2025-11-26)
- **后端**：新增 `site.footer.*` 配置项（年份、品牌、备案号、备案链接、Powered-by 文案），`SiteMetaDto` 输出 `footer` 信息供前端消费。
- **前端**：首页 Footer 改为读取后端配置，展示 `Copyright © <year> <brand> All rights reserved.`，备案号使用动态超链接并默认跳转至工信部备案系统，同时追加 Powered by 文案。
- **配置**：`application.yaml` 提供默认值，运营可通过环境覆盖年份、品牌名称、备案号及链接。
- **文档**：NOTE.md “3.2 前端架构” 增补新 Footer 行为与 YAML 配置说明，避免后续接入遗漏。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.27`。

## V1.2.28 (2025-11-26)
- **前端**：将首页“全部标签”徽章的配色收敛为深浅灰系，并针对明暗模式分别应用柔和背景与字体色，保持粗犷风格同时避免过度花哨。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.28`。

## V1.2.29 (2025-11-26)
- **前端**：全部标签徽章进一步统一为单一配色（明暗模式下分别对应灰调背景 + 对比字体），彻底消除色块循环带来的干扰，视觉更克制。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.29`。

## V1.2.30 (2025-11-26)
- **前端**：首页“全部标签”支持点击筛选文章，选中标签后列表即时过滤，仅展示包含该标签的文章，并提供清除筛选入口保持交互直观。
- **交互**：标签徽章改为可点击按钮并在激活时高亮，避免误触无法反馈的问题。
- **文档**：NOTE.md “3.2 前端架构” 说明标签筛选行为及状态同步规则，方便后续维护。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.30`。

## V1.2.31 (2025-11-26)
- **前端**：封装统一的 `scrollToPostsTop` 逻辑，点击“START READING”、标签筛选或分页按钮时都会滚到第一篇文章的顶部，自动预留导航栏高度，避免停在中间。
- **交互**：标签清除按钮和筛选点击后都会触发平滑滚动，确保读者在筛选内容后立即看到列表首篇。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.31`。

## V1.2.32 (2025-11-27)
- **前端**：后台 `/admin/create-post` 与 `/admin/posts/edit` 在发布 / 保存成功后新增右上角悬浮提示栏，延续本站霓虹配色并在 4 秒后自动消失，取代原本不显眼的小字反馈。
- **体验**：提示栏可手动关闭，失败场景仍以内联红字提示，既保持可见性也避免遮挡工作流。
- **文档**：NOTE.md “3.5 后台文章管理”“3.7 后台文章发布” 同步记录成功提示栏行为与时长，后续维护遵照同一交互。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.32`。

## V1.2.33 (2025-11-27)
- **前端**：实现后台 `/admin/comments` 评论管理页，支持按文章或“全部文章（当前列表）”双模式浏览评论树，提供刷新、统计、分页检索功能，并可直接在列表中回复、编辑或删除评论。
- **前端**：新增评论创建/回复表单，支持快速指向目标文章、选择父级评论、填写署名并提交，所有操作使用现有 `/posts/{id}/comments` API 完成 CRUD。
- **文档**：NOTE.md 追加“后台评论管理”章节，说明筛选模式与 CRUD 入口的工作方式，便于后续扩展审批流程。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.33`。

## V1.2.34 (2025-11-27)
- **后端**：新增 `AdminAnalyticsController` 提供 `/api/admin/analytics/summary` 聚合接口，基于 `analytics_page_views` 与 `analytics_traffic_sources` 统计区间 PV/UV、登录访问、热门文章和最近访客信息，仅 ADMIN / SUPER_ADMIN 可访问。
- **前端**：后台仪表盘 Dashboard 改为消费真实 Summary 数据，展示双行 KPI、趋势折线、流量来源、热门文章与最近访客（含文章、IP、时间、登录标识），支持一键刷新。
- **前端**：`/admin/analytics` 数据分析页支持 7/14/30 天切换，提供趋势图、流量来源、热门文章表格以及详细访问日志（文章、IP、时间、来源、Geo、用户状态），满足“可查看最近访客访问了哪些文章、何时访问、是否登录”的需求。
- **文档**：NOTE.md 新增“3.10 后台仪表盘与数据分析”记录接口结构、前端行为及可配置项。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.2.34`。

## V1.3.0 (2025-11-27)
- **后端**：`CommentService` 新增后台搜索/编辑能力，`/api/admin/comments` 支持分页、审核与删除；`AnalyticsService` 写入真实 `analytics_page_views`/`analytics_traffic_sources` 并默认跳过超级管理员，同时暴露 `/api/admin/analytics/page-views/me` 清理自身日志。
- **前端**：重写 `/admin/comments`，支持文章范围、状态筛选、关键字搜索以及基于权限的回复/审核/删除，并以 `AdminNoticeBar` 提示结果；`PermissionsView` 读取真实矩阵，可勾选 ADMIN/USER 两列并保存。
- **权限**：新增 `permissions_seed.sql`，同步 NOTE.md 说明，可用于初始化 `permissions`/`role_permissions`；超级管理员专属的权限矩阵页面成为唯一配置入口。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.0`。

## V1.3.1 (2025-11-27)

- **后端**：`DataInitializer` 支持 `app.bootstrap.*-password` 配置（Super Admin/Admin/Editor + default），启动时会检测旧的 `123456` 哈希并自动换成强密码，彻底消除浏览器弱密码告警。
- **后端**：`AnalyticsService.recordPageView` 仅在 `pageTitle/referrer` 含 `admin` 时跳过 SUPER_ADMIN，访问首页或文章时仍会写入 `analytics_page_views` 与 `analytics_traffic_sources`，解决自测无数据的问题。
- **前端**：首页 Hero Banner 版本标识更新为 `SANGUI BLOG // V1.3.1`，与本次补丁保持一致。
- **文档**：NOTE.md “4.6 数据采集”“4.7 初始账号与默认密码” 说明新的统计规则和密码配置项，提醒上线前通过环境变量覆写。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.1`。

## V1.3.2 (2025-11-27)
- **后端**：`PostService.incrementViews` 在每次成功 +1 浏览量后直接构造 `PageViewRequest` 调用 `AnalyticsService.recordPageView`，以文章真实标题落地 `analytics_page_views`/`analytics_traffic_sources`，避免前端记录异常导致后台无数据。
- **前端**：首页 Banner 再次同步为 `SANGUI BLOG // V1.3.2`，提示管理端本次 bugfix 已上线。
- **文档**：NOTE.md “4.6 数据采集” 补充文章详情页由服务端兜底写入 PV 的策略，保证未来排查有据可循。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.2`。

## V1.3.3 (2025-11-27)
- **后端**：`PostService.incrementViews` 在调用 `AnalyticsService` 失败时增加直接写库兜底，并记录日志，确保 `analytics_page_views` 必定落地，同时说明 1 分钟内存限流 + 10 分钟 DB 去重的行为规则。
- **前端**：首页 Banner 更新为 `SANGUI BLOG // V1.3.3`，提示最新统计修复已部署。
- **文档**：NOTE.md 的“3.9/3.10/3.11/4.6/4.7” 重新写成可阅读的说明（暂以英文描述以避免乱码），并补充服务端 PV 兜底与密码配置指南。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.3`。

## V1.3.4 (2025-11-28)
- **后端**：`SecurityConfig` 与全部 Admin/帖子/评论控制器改用 `PERM_*` 授权，`/api/posts` 写操作、评论公开接口也依据权限判定，确保在权限矩阵调整后立即生效，超级管理员可直接在文章页删除/编辑任意评论。
- **前端**：权限上下文上移到全局，登录用户均可进入后台个人资料；后台导航与按钮依据权限精确展示/隐藏，仪表盘自动跳转到首个可用模块。
- **评论管理**：`/admin/comments` 恢复评论列表、分页、审核/删除操作与后台回复表单，支持过滤范围统计、逐条审核；文章详情评论区新增管理员编辑/删除按钮以匹配后端放权。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.4`。

## V1.3.5 (2025-11-28)
- **后端**：`DataInitializer` 在检测弱密码时若遇到非 BCrypt 哈希将仅记录警告并跳过，不再把超级管理员等账号强制改写为默认口令，避免 V1.3.1 引入的“密码被自动重置”问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.5`。

## V1.3.6 (2025-11-28)
- **前端**：后台文章列表根据权限自动隐藏“打开编辑页”按钮，防止普通用户误跳转至无权限页面；标题列新增链接，点击可在新标签页直接预览 `/article/{id}` 页面。
- **UI**：文章列表状态列添加固定宽度以容纳三字中文状态，整体阅读更清晰。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.6`。

## V1.3.7 (2025-11-28)
- **后端**：`AnalyticsService.recordPageView` 改为独立事务并默认兜底 IP/来源写入，`updateTrafficSourceStat` 支持冲突重试与失败降级，避免统计异常导致文章浏览量回滚。
- **前端**：首页 Banner 版本文案提升至 `SANGUI BLOG // V1.3.7`，提示本次浏览量修复已上线。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.7`。

## V1.3.8 (2025-11-28)
- **后端**：`DataInitializer` 不再读取 `app.bootstrap.*-password` 也不会替换账号密码，只在缺失时补齐默认角色，防止启动时误改口令。
- **文档**：NOTE.md “4.7” 更新为“仅保留角色兜底 + 人工改密流程”，提醒后续维护者手工轮换。
- **前端**：首页 Banner 版本文案提升至 `SANGUI BLOG // V1.3.8`，同步提示本次口令策略调整。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.8`。

## V1.3.9 (2025-11-28)
- **后台用户**：创建/编辑用户支持直接上传头像（沿用个人资料页同一上传逻辑），列表新增头像展示并将默认角色预设为 USER，避免误建超级管理员。
- **前端**：夜间模式下 `/admin/profile` 只读信息徽章改用高对比度底色与文字，确保可读性；首页 Banner 更新为 `SANGUI BLOG // V1.3.9`。
- **文档**：NOTE.md “3.8 后台用户管理” 补充头像上传与默认角色策略，便于后续维护。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.9`。

## V1.3.10 (2025-11-29)
- **前端**：重构紧急广播与导航头部为统一固定容器，广播高度实时上报并驱动导航、Stats 条、粘性 Topbar 等组件读取共享 offset，确保任何页面的顶部导航都不会再被遮挡。
- **体验**：文章详情的分享提示、返回按钮、错误提示以及后台通知条均改用安全上边距，伴随紧急广播开关自动调整显示位置，滚动时的交互提示不再覆盖导航。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.10`。

## V1.3.11 (2025-11-29)
- **前端**：紧急广播新增“温和公告”样式，管理员可在后台切换告警/庆典风格并实时预览；对应的 EmergencyBar 根据样式自动调整色彩、图标与动画。
- **后端**：SystemBroadcast、新增广播 style 字段并透传至 `/api/site/meta` 与 `/api/site/broadcast`，数据库 schema、DTO、Service 均已扩充，历史广播默认回落为 ALERT。
- **文档**：NOTE.md “5. 紧急广播” 补充样式与字段说明，方便后续扩展更多主题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.11`。

## V1.3.12 (2025-11-29)
- **后端**：`/api/admin/users` 支持携带 `avatarUrl`，AdminUserService 在更新用户时会统一规范头像路径、落库并在文件变化后删除旧头像，逻辑与个人资料页保持一致。
- **前端**：后台用户管理的头像上传仍沿用统一接口，但保存时会把最新 `avatarUrl` 一并提交，确保数据库与文件系统同步。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.12`。

## V1.3.13 (2025-11-29)
- **文章详情**：博主信息卡优先读取站点作者头像（`/api/site/meta.author.avatar`），当文章摘要缺少 `authorAvatar` 时也能落在真实头像而非 Mock。
- **布局**：文章详情容器顶部内边距与返回按钮重新对齐，去除多余的 24px 偏移，避免因紧急广播改造带来的整体下移。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.13`。

## V1.3.14 (2025-11-29)
- **文章详情**：右侧新增“直达评论区”按钮，沿用站点 Neo-Brutalism 风格（黑框+阴影），点击即可平滑滚动到评论列表；评论容器新增锚点，方便未来复用。
- **交互**：按钮默认在桌面端展示，移动端可继续通过原有滚动方式浏览，整体视觉与返回按钮保持统一。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.14`。

## V1.3.15 (2025-11-29)
- **体验**：评论快捷按钮与“返回首页”按钮对称摆放在文章顶部两侧，并在所有终端可见，点击即可平滑滚动到评论区，保持整体交互一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.15`。

## V1.3.16 (2025-11-29)
- **后端**：`/api/site/meta` 新增 `version` 字段，可通过 `application.yaml` 的 `site.version` 统一配置，前端 Banner 直接读取该值展示。
- **静态资源**：`api.js` 重新引入 `VITE_API_BASE` / `VITE_ASSET_ORIGIN` 配置并默认回落到 `http://localhost:8080`，所有 `/avatar`、`/uploads` 链接现在会自动拼接后端域名，文章详情页博主头像不再退回 Mock。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.16`。

## V1.3.17 (2025-11-29)
- **评论区**：允许回复二级评论，按钮对所有评论可见。回复二级评论时系统自动在内容前加上 `@原评论者：` 并仍以二级结构展示，确保楼中楼讨论保持扁平外观。
- **资源加载**：评论头像改用统一的 `ASSET_ORIGIN`，避免因不同部署环境导致头像链接指向错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.17`。

## V1.3.18 (2025-11-29)
- **协作规范**：修复 `AGENTS.md` 乱码并重写任务指令，强调输出格式、版本管理和 NOTE/AGENTS-EDIT 维护要求，避免后续代理执行出错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.18`。

## V1.3.19 (2025-11-29)
- **配置安全**：`application.yaml` 的数据库用户名、密码与 JWT Secret 均改为通过 `DB_USERNAME`、`DB_PASSWORD`、`JWT_SECRET` 注入，不再在仓库中保留明文，避免仓库外泄时数据库与令牌体系同步暴露。
- **前端版本**：前端 Banner 兜底版本与 `site.version` 同步到 `V1.3.19`，保证显示一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.19`。

## V1.3.20 (2025-11-29)
- **配置兼容**：为防止本地/生产环境仅设置 `SPRING_DATASOURCE_*` 等原生变量导致占位符无法解析，`application.yaml` 现优先读取 `DB_*`，若缺失将回落至 `SPRING_DATASOURCE_*` 或 `SPRING_JWT_SECRET`，并在缺少凭证时给出明确提示。
- **文档**：NOTE.md “静态资源与站点配置” 小节同步说明新的变量兼容策略，提醒开发者不要再把明文凭证写回仓库。
- **前端版本**：Banner fallback 升级为 `V1.3.20`，与后端 `site.version` 保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.20`。

## V1.3.21 (2025-11-29)
- **安全**：评论删除/编辑必须同时匹配 `postId` 与 `commentId`，后端在 Service 层二次校验评论所属文章，阻断通过猜测评论 ID 越权删改他人文章评论的可能性。
- **前端版本**：首页 Banner fallback 与 `site.version` 同步到 `V1.3.21`，确保显示最新补丁号。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.21`。

## V1.3.22 (2025-12-01)
- **主页导航**：品牌字样统一为黑/白配色并通过 LayoutGroup + `layoutId` 提供的动态下划线展示当前视图，CTA 以外的元素移除热粉色，导航边框与头像区域保持深浅色模式一致的黑白/金色层级。
- **Hero Banner**：叠加锥形渐变与噪点纹理动画，重新分配高光色并让「Start Reading」按钮改用热粉色，突出唯一 CTA。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.22`。

## V1.3.23 (2025-12-01)
- **前端/导航**：桌面导航与标签筛选区改用 AnimateSharedLayout，共享 layoutId 的金色高亮会以 0.05s 延迟在所选项间滑动，交互逻辑继续沿用既有 state。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.23`。

## V1.3.24 (2025-12-01)
- **文章卡片**：列表卡片 hover 改为 `whileHover={{ y: -6, rotate: -1 }}` 并配合 spring 过渡，在微微上浮/倾斜的同时保留原有点击事件。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.24`。

## V1.3.25 (2025-12-01)
- **共用按钮**：PopButton 引入基于指针坐标的局部波纹与点击弹簧动画，波纹色值复用主色/边界逻辑、持续 0.45s，统一与全局 ripple 工具的反馈风格，同时保持 hover 放大与原 onClick 事件。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.25`。

## V1.3.26 (2025-12-01)
- **文章卡片**：左侧彩色区的 Code 背景改为 motion 图层，继承卡片的 `whileHover="hover"` 状态并以 spring 过渡实现渐隐+轻微放大，强化浮雕观感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.26`。

## V1.3.27 (2025-12-01)
- **标签筛选**：标签 chip 改用 `motion.button layout` + `AnimatePresence`，在展开/收起和分页切换时以 spring 方式进出场并保持共享高亮，整个区域 `motion.div layout` 保障平滑重排。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.27`。

## V1.3.28 (2025-12-01)
- **标签筛选**：根据视觉反馈移除 `layout/exit` 动画，恢复为静态 flex 渲染，仅保留共享高亮的 AnimateSharedLayout，列表展开/分页时不再额外缩放。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.28`。

## V1.3.29 (2025-12-01)
- **按钮动效**：PopButton `whileHover` 叠加 boxShadow 动画，配合现有波纹与点击弹簧，让 Hero CTA/社交按钮在 Neo-Brutalism 风格下具备更强的层级感；不同变体按需调整 hover/tap 阴影。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.29`。

## V1.3.30 (2025-12-01)
- **滚动反馈**：返回顶部漂浮按钮新增 ScrollIndicator，使用 `useSpring` 驱动的圆形 `motion.svg` 路径实时呈现滚动进度，并在拖拽/点击逻辑保持不变的情况下同步更新可见性；辅助 aria 标签显示百分比。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.30`。

## V1.3.31 (2025-12-01)
- **滚动反馈**：根据反馈缩小 ScrollIndicator 的 SVG 半径并将按钮内部容器改回原始 40px 尺寸，恢复「一键回顶」的整体占位感，同时保留滚动进度显示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.31`。

## V1.3.32 (2025-12-01)
- **导航分隔**：在广播条与 Navigation 之间新增 `motion.div` 脉冲下划线，复用 `layoutId` 处理当前视图变化与提示状态，切换视图时会以金色-粉色-靛紫渐变闪动，强化顶部反馈。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.32`。

## V1.3.33 (2025-12-01)
- **导航彩蛋**：Logo 连续点击五次会触发 “DEV MODE READY” 提示，采用 AnimatePresence 弹出徽章，不影响原有 view 切换逻辑。
- **滚动彩蛋**：当滚动到底部后点击返回顶部按钮，将生成一组烟花粒子，与 ScrollIndicator 共存且拖拽/回顶行为保持原状。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.33`。

## V1.3.34 (2025-12-01)
- **彩蛋优化**：DEV 徽章改为居中大号霓虹样式，增加描边与投影，确保重复点击时信息更醒目；返回顶部的烟花粒子数量、尺寸、飞行距离全面提升，形成更明显的爆裂效果。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.34`。

## V1.3.35 (2025-12-01)
- **图层修复**：DEV 徽章提升到 z-50 并保持指针穿透，避免被导航下方脉冲线覆盖；脉冲线本身下降到基层 `z-0`，仍随视图切换进行渐变动画。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.35`。

## V1.3.36 (2025-12-01)
- **导航分隔**：去掉导航下方脉冲线的 layout 动画，改为静态 motion.div 仅根据广播开关调整透明度，避免从下往上的跳动；Navigation 参数恢复 `setIsDarkMode` 以保持原逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.36`。

## V1.3.37 (2025-12-01)
- **主题切换**：SanGuiBlog 恢复 `handleThemeToggle`，导航按钮直接翻转深浅色并写回 localStorage，修复 `values[i].get` 与 `handleThemeToggle is not defined` 的运行时错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.37`。

## V1.3.38 (2025-12-01)
- **标签云**：标签筛选按钮在 Idle 状态自动进行轻微 scale/opacity 呼吸动画，点击后触发短暂放光效果，与现有共享高亮一起表现选中状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.38`。

## V1.3.39 (2025-12-01)
- **标签云**：根据视觉反馈移除标签 Idle 呼吸与放光动画，恢复为静态按钮，仅保留共享高亮与阴影动效，避免干扰阅读。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.39`。

## V1.3.40 (2025-12-01)
- **滚动指示器**：浅色模式下的返回顶部按钮进度环改为白色半透明轨迹 + 金色进度，确保明亮背景也可清晰识别。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.40`。

## V1.3.41 (2025-12-01)
- **滚动指示器**：进度环外置至按钮周围，中心箭头与烟花特效保留，拖拽逻辑不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.41`。

## V1.3.42 (2025-12-01)
- **滚动指示器**：外置圆环缩回至紧贴按钮（scale≈1.35、半径 16px），防止按钮本体被遮挡。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.42`。

## V1.3.45 (2025-12-01)
- **主题切换**：辐射动画升级为“毒液喷射”风格：随机波浪 blob 结合斜向光带，先喷射再切换深浅色，没有中心模糊圈，赛博感更强。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.45`。

## V1.3.46 (2025-12-01)
- **主题切换**：去掉持续光斑条纹，改为带 `clipPath` 的旋转光圈；每次点击都生成新的 ID 以保证动画可重复触发，即使快速连击也能保持爆发感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.46`。

## V1.3.47 (2025-12-01)
- **主题切换**：光圈改用随机 `polygon` clipPath 生成“毒液喷射”形状，并随角度/旋转变化，连击时也能持续触发，视觉更不对称、更具赛博味。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.47`。

## V1.3.48 (2025-12-01)
- **主题切换**：进一步加入“液态触须”——随机生成多条 tendril 叠加在喷射 blob 上，喷发/扭动后再切换深浅色，整体更像毒液喷射的流动感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.48`。

## V1.3.49 (2025-12-01)
- **背景彩蛋**：白天模式在背景显示太阳+云雾动画，夜晚模式出现月亮、星星与流星，均为 pointer-events-none 的装饰层，不影响交互。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.49`。

## V1.3.51 (2025-12-01)
- **背景彩蛋**：增强白天的太阳光晕与云朵阴影，并大幅提高夜间流星数量与轨迹（含对角运动），让昼夜元素在背景中明显可见。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.51`。

## V1.3.52 (2025-12-01)
- **版本同步**：首页 Banner fallback 及 `site.version` 默认值更新至 V1.3.52，确保前端展示与最新改动保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.52`。

## V1.3.53 (2025-12-02)
- **模块/页面**：登录视图在认证失败时仅展示响应内的 `message` 字段，API 层同步提取该字段避免再次把整段 JSON 原文暴露给用户。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.53`。

## V1.3.54 (2025-12-02)
- **模块/页面**：新增 `site.asset-base-url` 配置并通过 `/api/site/meta.assetBaseUrl` 暴露给前端，`buildAssetUrl`、首页导航、文章列表和管理员资料页统一引用该域名生成 `/uploads`、`/avatar`、`/contact` 图片地址，避免硬编码 `localhost` 导致外网无法访问。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.54`。

## V1.3.55 (2025-12-02)
- **模块/页面**：`buildAssetUrl` 现在会识别 `site.asset-base-url`/`VITE_ASSET_ORIGIN` 中额外的路径（如 `.../uploads`），自动去重重复的段落，确保文章内图片不会再次出现 `uploads/uploads/...` 的错误链接。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.55`。

## V1.3.56 (2025-12-02)
- **模块/页面**：完成“归档”视图，按年份与月份展示完整文章时间轴，支持快速跳转文章、刷新归档数据与返回首页，并保持 Neo-Brutalism 风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.56`。

## V1.3.57 (2025-12-02)
- **文章详情**：背景服从首页昼夜彩蛋、顶部返回按钮改为“返回”且依据入场来源（首页/归档等）智能跳回，评论区“后台管理”按钮与暗色模式样式保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.57`。

## V1.3.58 (2025-12-02)
- **视觉统一**：昼夜彩蛋改为 `fixed` 覆盖整页，文章详情不再闪烁或滚动错位，白天云朵重新设计为柔和渐层造型；归档右侧新增月份速选面板，支持平滑定位到对应月份。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.58`。

## V1.3.59 (2025-12-02)
- **归档体验**：快速跳转按钮取消上移动画并加投影，避免与卡片白边重叠；白天彩蛋仅保留太阳光晕，不再显示云朵。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.59`。

## V1.3.60 (2025-12-02)
- **彩蛋开关**：导航新增“彩蛋 ON/OFF”按钮（默认开启），状态持久化到本地，控制是否渲染太阳/月亮背景；按钮位于主题切换左侧并与整体风格一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.60`。

## V1.3.61 (2025-12-02)
- **返回顶部按钮**：白天模式的滚动进度环移至按钮外圈，改用高对比描边，进度轨迹在平面外侧旋转，鼠标悬停仍保留喷火特效。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.61`。

## V1.3.62 (2025-12-02)
- **返回顶部按钮**：在白天模式下进一步优化按钮（回归原始尺寸、箭头增亮且进度环置于外圈），确保浅色背景也能清晰分辨滚动进度。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.62`。

## V1.3.63 (2025-12-02)
- **文章分页**：在页码条两侧新增“|<”“>|”快捷按钮，可一键跳到第一页或最后一页，保持原有风格与交互状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.63`。

## V1.3.64 (2025-12-02)
- **分页图标**：页码条的“跳到首尾页”按钮改用 Lucide `ChevronsLeft/ChevronsRight` 图标，视觉更统一并与其余导航图标保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.64`。

## V1.3.65 (2025-12-03)
- **后台侧边栏**：`/admin` 左侧菜单分组为“概览 / 创作管理 / 内容体系 / 运营互动 / 用户与权限 / 个人与系统”二级结构，保留原有路由与权限过滤，只调整层级与样式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.65`。

## V1.3.66 (2025-12-03)
- **后台侧边栏标题移除**：移除左侧菜单顶部 “SANGUI // ADMIN” 文案，让菜单项自顶显示，保留现有分组与交互。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.66`。

## V1.3.67 (2025-12-03)
- **顶部导航设置抽屉**：移除头像旁后台入口齿轮与导航区的彩蛋开关，将“彩蛋背景”开关收纳到全局齿轮弹窗（登录态与未登录态均可见）并新增齿轮按钮位于主题切换左侧。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.67`。

## V1.3.68 (2025-12-03)
- **导航设置弹窗修复**：修正导航组件 JSX 结构，解决 Vite React Babel “Adjacent JSX elements” 报错，保留齿轮弹窗与彩蛋开关收纳逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.68`。

## V1.3.69 (2025-12-03)
- **关于页面**：新增“关于本站”前台页面，访客与管理员可阅读；超级管理员在后台“关于站点”单页以 Markdown 编辑/上传，一键刷新前台内容。
- **后台编辑**：在后台新增“关于站点”标签（仅超级管理员可见），提供简化编辑器（仅正文 Markdown/文件上传），省略主题色、分类、摘要、标签等字段。
- **数据库**：新增 `about_page` 表及初始化空记录，持久化关于页正文与更新人。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.69`。

## V1.3.70 (2025-12-03)
- **关于页编辑优化**：后台 about 单页移除实时预览，新增 Markdown 图片上传（复用文章上传链路，自动插入光标位置），保留 MD 文本域与刷新/保存动作。
- **关于页渲染优化**：前台关于页改用 ReactMarkdown（与文章详情同套解析链路），支持 GFM/Math/Raw/KaTeX，暗色模式与彩蛋背景保持一致，代码块样式与文章详情统一，超级管理员可从前台跳转后台编辑。
- **跳转修复**：前台“编辑关于”按钮强制跳转 `/admin/about`，避免偶发落到后台主页。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V1.3.70。


## V1.3.71 (2025-12-03)
- **代码块统一**：关于页与文章详情共用 Mac 风代码框（更大三色圆点+CODE 标签，左右内边距加大，浅色白底/深色夜底，缩进一致）。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V1.3.71。

## V1.3.72 (2025-12-03)
- **关于页渲染**：关于页 Markdown 渲染与文章详情完全同步：图片预览不再触发滚动条跳动，暗色内容卡片改用文章页同款浅色底，代码块采用统一的 not-prose 包装与内边距，左侧留白到位。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.72`

## V1.3.73 (2025-12-03)
- **后台侧边栏**：移除“概览”分组，仪表盘作为一级菜单直接展示，其余分组保持层级与样式不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.73`

## V1.3.74 (2025-12-03)
- **安全配置**：`application.yaml` 恢复通过环境变量注入数据库账号、口令与 JWT 密钥，移除硬编码默认值；同步站点版本号为 1.3.74。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.74`

## V1.3.75 (2025-12-03)
- **Swagger 加固**：默认关闭 `/swagger-ui.html` 与 `/api-docs`，仅在 `dev` Profile 自动开启，避免生产环境暴露接口模型。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.75`

## V1.3.76 (2025-12-03)
- **角色初始化**：DataInitializer 仅创建基础角色与权限，不再为固定用户名自动分配角色，避免弱口令账号被静默升权。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.76`

## V1.3.77 (2025-12-03)
- **存储清理**：新增“系统设置-未引用图片清理”功能（仅超级管理员），扫描所有文章与关于页引用后删除未被使用的上传图片，支持列表预览与二次确认。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.77`

## V1.3.78 (2025-12-03)
- **模块/页面**：数据分析页仅保留实时访问日志，新增分页浏览全部 analytics_page_views；修复 IP 解析、登录用户落库与 Geo 自动填充，并补充后台分页接口。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.78`
## V1.3.79 (2025-12-03)
- **模块/页面**：数据分析页优化：浅色模式下分页下拉对比度提升、隐藏 user_agent 列、用户列加宽便于阅读。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.79`
## V1.3.80 (2025-12-03)
- **模块/页面**：数据分析页用户列改为头像展示（悬停显示“id:用户名:显示名”），未登录仍显示访客。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.80`
## V1.3.81 (2025-12-03)
- **模块/页面**：数据分析日志头像链接改为与用户列表一致（支持相对路径构建），tooltip 显示“id:用户名:显示名”；移除 slug 行，仅展示文章标题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.81`

## V1.3.82 (2025-12-03)
- **模块/页面**：数据分析页头像解析与用户列表保持一致（多字段兼容，空缺回退首字母），悬停提示改为`id-username-display_name`格式并移除头像右侧用户名；分页条数下拉样式改为浅色圆角风格，消除黑色突兀感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.82`

## V1.3.83 (2025-12-04)
- **模块/页面**：后台数据分析日志的头像路径统一补全 `/uploads/avatar/` 前缀并兼容 `avatar/avatarUrl/avatar_url/avatarPath` 字段，防止破图；tooltip 按 `id-username-display_name` 显示真实昵称，首字母兜底逻辑保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.83`

## V1.3.84 (2025-12-04)
- **模块/页面**：数据分析页 tooltip 追加对 `display_name/userName` 的读取，确保悬停提示展示真实昵称而非重复用户名；同步版本号 `V1.3.84`，便于后台确认修复。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.84`

## V1.3.85 (2025-12-04)
- **接口**：`/admin/analytics/page-views` 响应新增 `display_name` 字段（同步 DTO 与 Service），让前端无需降级回退即可直接展示用户昵称；版本号同步至 `V1.3.85`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.85`

## V1.3.86 (2025-12-04)
- **访问信息**：新增 `clientIp` 字段，前端在浏览器侧调用公网 IP 服务后随 PV 请求附带，后端在检测到本地回环地址时会优先采用该值并通过 `IpUtils` 校验归一化；本地联调亦可展示真实公网 IP。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.86`

## V1.3.87 (2025-12-04)
- **来源本地化**：PV 请求新增 `sourceLabel`，前端依据 `document.referrer` 自动生成“来自首页/归档/站内文章/外部链接”等中文描述；后端优先使用该字段写入 `referrer_url` 并在兜底场景记录“系统兜底”，Analytics 列表不再出现英文 `Direct / None`/`server-fallback`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.87`

## V1.3.88 (2025-12-04)
- **统计稳定性**：`AnalyticsTrafficSource` 增加自动创建/更新时间戳，避免 `created_at`/`updated_at` 为空导致 PV 统计写入失败；`sanguiblog_db.sql` 同步默认值，确保初始化环境一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.88`

## V1.3.89 (2025-12-04)
- **流量来源幂等**：`updateTrafficSourceStat` 采用“查询→更新/插入 + 重试”策略，并在冲突时清理 EntityManager，彻底消除唯一键并发冲突导致的 500；构造器注入 `EntityManager` 支持刷新。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.89`

## V1.3.90 (2025-12-04)
- **流量来源幂等（v2）**：改用数据库 `INSERT ... ON DUPLICATE KEY UPDATE`（`upsertSourceVisit`）一次性自增 visits，消除 Hibernate Session 异常；AnalyticsService 取消手动重试逻辑，避免事务被标记 rollback。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.90`

## V1.3.91 (2025-12-04)
- **来源占比**：`analytics_traffic_sources` 在每次 upsert 后立即刷新 `percentage = visits / 总访次`，百分比保留两位小数，后台“来源”卡片可直接展示实时占比；新增 `refreshPercentage` 原生 SQL，确保更新在数据库端完成。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.91`

## V1.3.92 (2025-12-04)
- **来源占比优化**：剔除复杂 SQL JOIN，改为在服务层重新查询当天所有来源并用 `BigDecimal` 精确计算百分比再批量保存，确保 `percentage` 字段实时非空、四舍五入到两位小数，兼容任意数据源。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.92`

## V1.3.93 (2025-12-04)
- **埋点去重**：前端不再对文章详情重复调用 `recordPageView`，避免与后端 `PostService` 的兜底统计叠加，单次访问仅计 1 次。
- **来源中文化**：`source_label` 优先采纳前端上报的中文描述（如“来自首页”“外部链接：example.com”），缺省时回落到与 `referrer_url` 一致的本地化字符串。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.93`

## V1.3.94 (2025-12-04)
- **模块/页面**：Analytics 前端埋点新增视图守卫，Home/Archive/Admin 仅首入一次上报 PV，彻底杜绝 analytics_page_views 三连记录并在 NOTE.md 记录该机制。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.94`

## V1.3.95 (2025-12-04)
- **模块/页面**:重构 /admin 仪表盘(新增 1/7/30/全部概览筛选、14 天 PV/UV 折线、移除热门文章/最新访问/紧急广播)并同步后端统计逻辑(文章 views/comments 聚合、UV 登录优先去重、全部历史=days -1)。
- **版本**:首页 Banner 更新为 `SANGUI BLOG // V1.3.95`
## V1.3.96 (2025-12-04)
- **模块/页面**：后台数据分析页的“清理我的访问日志”新增 IP 维度匹配，删除当前账号日志后会一并移除 user_id 为空但 viewer_ip 与超级管理员一致的访客记录，确保登录前的访问也能被清除。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.96`

## V1.3.97 (2025-12-04)
- **模块/页面**：/admin/analytics 更名为“访问日志”（导航、权限管理同步更新），并修复刷新按钮在明暗模式下 hover 后文本变黑的可见性问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.97`

## V1.3.98 (2025-12-07)
- **模块/页面**：首页文章列表分页统一监听页码变化触发 `scrollToPostsTop`，修复上一页/下一页/首末页点击后未自动滚回第一条文章的体验问题，确保任意翻页按钮都把视口带回列表顶部。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.98`

## V1.3.99 (2025-12-07)
- **模块/页面**：首页左侧分类筛选（一级/二级/Reset）也会触发 `scrollToPostsTop`，列表分页容器去掉 `flex:1` 占位，解决筛选后不自动上滑及不足一页时分页与警句之间出现大段空白的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.99`

## V1.3.100 (2025-12-07)
- **模块/页面**：首页一级分类点击即刻滚动到顶部，并支持再次点击当前分类时折叠子分类且回退到“全部”，解决“再点一次无响应”和筛选后未上滑的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.100`

## V1.3.101 (2025-12-07)
- **模块/页面**：首页 Hero 标语与分页警句改为读取 `application.yaml`（`site.hero.tagline`、`site.home.signature-quote`），后端统一配置后前端自动展示，确保文案可运营化。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.101`

## V1.3.102 (2025-12-07)
- **模块/页面**：首页作者头像彩蛋优化，快速连点头像会弹出“转慢一点”“我快晕了”等随机提示泡泡，样式沿用黑黄复古边框，仅作为前端趣味反馈不影响业务逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.102`

## V1.3.103 (2025-12-07)
- **模块/页面**：头像旋转提示改为居中赛博感弹窗，任何滚动位置都能看到，渐隐消失不阻塞交互。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.103`

## V1.3.104 (2025-12-07)
- **模块/页面**：新增“眼冒金星”大彩蛋，超高频点击头像会触发全屏星爆与旋转锁定动画，冷却期内头像仅震动提醒，计时结束或刷新后恢复正常。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.104`

## V1.3.105 (2025-12-07)
- **模块/页面**：眼冒金星冷却时间延长至 60 秒，避免误触后立即恢复，整体体验更接近“系统降温”效果。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.105`

## V1.3.106 (2025-12-07)
- **模块/页面**：新增主题“超频模式”彩蛋，450ms 内连续切换主题 ≥6 次会触发全屏矩阵流与提示气泡，3 秒后自动恢复。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.106`

## V1.3.107 (2025-12-07)
- **模块/页面**：超频模式提示保持居中显示，冷却期内不再被“冷却中”提示覆盖，避免提示闪烁。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.107`

## V1.3.108 (2025-12-07)
- **模块/页面**：点击顶部“首页/归档/关于”导航后自动平滑滚动到页面顶部，确保切换视图时视口统一回到起点。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.108`

## V1.3.109 (2025-12-07)
- **模块/页面**：文章详情页的“首页”按钮返回后会自动滚动至文章列表顶部（第一篇位置），体验与主页一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.109`

## V1.3.110 (2025-12-07)
- **模块/页面**：后台 `/admin/analytics` 访问日志支持超级管理员单条或批量删除，后端提供对应删除接口并校验 SUPER_ADMIN，表格新增勾选列与删除按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.110`

## V1.3.111 (2025-12-07)
- **模块/页面**：后台发布文章时，上传 Markdown 自动去掉文件名前缀（首个“-”及其之前）作为标题；摘要从首个以 “>” 开头的行提取，未识别时提示手动填写，并从正文中移除该行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.111`

## V1.3.112 (2025-12-07)
- **模块/页面**：上传 Markdown 后自动统计正文中的图片数量（识别 `![alt](url)` 语法），在提示区醒目告知“本文检测到 X 张图片”，便于检查资源是否齐全。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.112`

## V1.3.113 (2025-12-07)
- **模块/页面**：发布文章页新增“清空表单”按钮，点击需确认后重置标题、摘要、正文、标签、主题色等所有输入，避免误操作。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.113`

## V1.3.114 (2025-12-07)
- **模块/页面**：发布文章页将步骤顺序调整为“二级分类 → 标签 → 资源标识”，并在选择二级分类时按顺序自动套用预设颜色（最多 6 个，超出不自动选），仍可手动修改颜色。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.114`

## V1.3.115 (2025-12-07)
- **模块/页面**：二级分类自动配色仅在用户未手动改色时生效，避免覆盖手动选择；若已手动调整颜色，后续切换分类不再自动改色。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.115`

## V1.3.116 (2025-12-07)
- **模块/页面**：重置表单会同步选择首个父分类的首个二级分类并按预设色自动上色；“重新生成”按钮文案明确不改颜色。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.116`

## V1.3.117 (2025-12-07)
- **模块/页面**：发布页版本号仅读取后端 `site.version`，前端不再硬编码回退；新增“重置为默认色”按钮；重置表单会恢复默认配色标记，避免自动配色与手动配色混淆。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.117`

## V1.3.118 (2025-12-07)
- **模块/页面**：系统设置新增空目录扫描/删除（Super Admin）；清理页面支持重新扫描空目录并批量删除。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.118`

## V1.3.119 (2025-12-07)
- **模块/页面**：修复系统设置“空目录清理”重新扫描时报 `adminScanEmptyFolders is not defined` 的问题（补全前端 API 导入）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.119`

## V1.3.120 (2025-12-07)
- **模块/页面**：发布页支持批量上传图片并按文件名匹配 Markdown 中的本地占位路径（自动替换），未匹配的图片会追加插入；上传结果提示“已上传 X 张，匹配替换 Y 张”，若未全部匹配会提示手动补全。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.120`

## V1.3.121 (2025-12-07)
- **模块/页面**：文章编辑页同步批量图片匹配替换能力；步骤顺序调整为“二级分类 → 标签 → 资源标识/颜色/状态”，分类自动配色仅在未手动改色时生效。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.121`

## V1.3.122 (2025-12-07)
- **模块/页面**：发布文章后清空上一篇的上传/匹配提示，避免连续发布时残留“已上传/匹配”信息。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.122`

## V1.3.123 (2025-12-07)
- **模块/页面**：首页文章列表改为一次加载最多 500 篇，分页数量随文章总数动态增长（每页 5 篇），不再只显示 4 页。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.123`

## V1.3.124 (2025-12-07)
- **模块/页面**：前端请求前检测 JWT 过期，过期则清理 token 并提示重新登录，避免 silent 403。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.124`

## V1.3.125 (2025-12-08)
- **模块/页面**：首页分页支持本地选择 5/10/20 条每页（设置面板新增下拉保存至浏览器），页码过长时自动使用省略号并移除首/尾/前/后翻按钮以保持简洁。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.125`

## V1.3.126 (2025-12-08)
- **模块/页面**：优化首页分页省略号样式，采用本站卡片式圆点风格，去除虚线边框与违和感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.126`

## V1.3.127 (2025-12-08)
- **模块/页面**：再次美化首页分页省略号，改为圆润渐变胶囊样式与粗体“···”，贴合本站明快/暗夜配色。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.127`

## V1.3.128 (2025-12-08)
- **模块/页面**：首页分页省略号胶囊样式透明度下调，悬停回满不透明度，视觉更柔和。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.128`

## V1.3.129 (2025-12-08)
- **模块/页面**：合并 `permissions_seed.sql` 入 `sanguiblog_db.sql`，权限列表与角色映射随建库脚本一次初始化，移除独立 seed 脚本。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.129`

## V1.3.130 (2025-12-08)
- **模块/页面**：新增后端 Dockerfile（`SanguiBlog-server/Dockerfile`），提供 Maven 构建 + Temurin JRE 多阶段镜像，含健康检查与上传目录挂载，便于服务器端 Docker 部署。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.130`

## V1.3.131 (2025-12-08)
- **模块/页面**：新增前端 Dockerfile（`SanguiBlog-front/Dockerfile`），Node20 + Nginx 多阶段构建，内置 SPA fallback 与 `/api` 反代示例，便于容器化前端静态资源。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.131`

## V1.3.132 (2025-12-08)
- **模块/页面**：新增根目录 `docker-compose.yml`，一键启动 MySQL、后端、前端（含上传卷与构建参数示例），便于本地或服务器端 Docker 编排。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.132`

## V1.3.133 (2025-12-09)
- **模块/页面**：前端页面标题由 “sanguiblog-front” 改为 “三桂博客-全新版本焕然一新”，浏览器标签直观展示中文品牌。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.133`

## V1.3.134 (2025-12-09)
- **模块/页面**：站点图标改为 `public/vite.jpg`，浏览器标签展示用户提供的 JPEG 图标。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.134`

## V1.3.135 (2025-12-09)
- **模块/页面**：在 `/admin/settings` 重新加入站点广播配置（紧急/庆典双风格），SUPER_ADMIN 可切换开关与文案，实时同步到前台通知条。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.135`

## V1.3.136 (2025-12-09)
- **模块/页面**：庆典广播样式焕新为暖色渐变与柔和闪烁，补足庆典氛围，紧急广播保持原有警示效果。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V1.3.136`

## V2.0.0 (2025-12-09)
- **模块/页面**：新增 `scripts/switch-env.ps1` 一键切换 dev/prod，同步更新后端 `application.yaml` 与前端 `.env.local`；上线版本默认切至生产配置。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.0`

## V2.0.1 (2025-12-11)
- **模块/页面**：后台访问日志（`/admin/analytics`）调整表格列宽：文章列收窄，访客 IP 与来源列加宽防止字符换行，IP 末位与来源短文案均不再被断行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.1`

## V2.0.2 (2025-12-11)
- **模块/页面**：进一步微调访问日志表格列宽：文章列略微放宽提升标题可读性，地理列收紧以避免浪费空间，整体不再出现 IP/来源/地理换行问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.2`

## V2.0.3 (2025-12-11)
- **模块/页面**：再次调整访问日志表格列宽：文章列加宽（标题更完整），地理列进一步收窄以腾出空间，保持 IP/来源/地理均不换行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.3`

## V2.0.4 (2025-12-11)
- **模块/页面**：访问日志表格再优化：文章列继续加宽并单行省略号展示，悬停可见全称；地理列进一步收紧，整体布局更紧凑且无换行溢出。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.4`

## V2.0.5 (2025-12-11)
- **模块/页面**：访问日志表格列宽最终微调：文章列进一步加宽（单行省略号+悬停全称），地理列再缩短以释放空间，整体布局更均衡。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.5`

## V2.0.6 (2025-12-11)
- **模块/页面**：访问日志表格列宽再度优化：文章列继续加宽以容纳更长标题，地理列进一步压缩，保持文章单行省略号+悬停全称，整体更利于阅读。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.6`

## V2.0.7 (2025-12-11)
- **模块/页面**：访问日志表格新增 IP 一键复制（点击 IP 即写入剪贴板并提示），同时继续加宽文章列、收紧地理列以优化阅读。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.7`

## V2.0.8 (2025-12-11)
- **模块/页面**：访问日志 IP 复制按钮去除超链接样式，保持正常文本外观但可点击复制，体验更自然。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.8`

## V2.0.9 (2025-12-11)
- **模块/页面**：访问日志 IP 复制改为醒目弹窗提示，自动 2.5 秒消失；继续沿用普通文本外观的可点复制交互。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.9`

## V2.0.10 (2025-12-11)
- **模块/页面**：IP 复制成功弹窗位置改为屏幕居中，视觉更醒目；交互逻辑与自动消失保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.10`

## V2.0.11 (2025-12-11)
- **模块/页面**：/login 页面密码输入新增“显示/隐藏”切换按钮，支持查看已输入密码，默认仍为不可见模式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.11`

## V2.0.12 (2025-12-11)
- **模块/页面**：/login 密码显示切换改用可视化图标（Eye/EyeOff），输入框预留图标空间，交互更直观。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.12`

## V2.0.13 (2025-12-11)
- **模块/页面**：修复登录页首次输入密码出现双重“显示密码”图标的问题，禁用浏览器自带的密码可见按钮，仅保留自定义图标。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.13`

## V2.0.14 (2025-12-11)
- **模块/页面**：/login 用户名与密码输入仅允许可打印 ASCII（英文、数字及常见符号），阻止中文等特殊字符输入以避免认证异常。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.14`

## V2.0.15 (2025-12-11)
- **模块/页面**：登录成功后返回上一页（若无历史则回首页），修复登录后总跳转首页的体验问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.15`

## V2.0.16 (2025-12-11)
- **模块/页面**：登录新增防刷验证码：同 IP 10 分钟内失败 3 次后强制验证码，提供 `/api/auth/captcha` 返回扭曲字母数字图；前端登录页支持验证码输入/刷新，错误提示自动拉取验证码。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.16`

## V2.0.17 (2025-12-11)
- **模块/页面**：验证码布局优化：图片独占一行显示在输入框上方，移除独立刷新按钮，点击图片即可刷新，避免遮挡登录表单。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.17`

## V2.0.18 (2025-12-11)
- **模块/页面**：登录防刷完善：后端按 IP 失败计数返回 `captchaRequired`/`remainingAttempts`，提供 `/api/auth/captcha`；前端登录失败直接依据返回字段展示验证码，不再依赖错误文案，用户名/密码长度与字符集前后端统一校验。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.18`

## V2.0.19 (2025-12-11)
- **修复**：补充 AuthService 对 LoginChallengeException 的 import，解决编译缺失符号错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.19`

## V2.0.20 (2025-12-11)
- **优化**：验证码提示文案优化：仅在剩余尝试 >0 时展示剩余次数，触发验证码后显示“已触发验证码，请先完成图形验证”，避免一直显示 0 的误导。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.20`

## V2.0.21 (2025-12-11)
- **安全/性能**：验证码接口以 IP+UA 5s 速率限制并缓存 60s，减少刷取与重复生成；返回 remainingAttempts 同步缓存。
- **前端**：验证码加载失败时显示提示并可重新获取；获取按钮在暗色模式样式适配；密码显示/隐藏按钮在暗色模式配色修复。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.21`

## V2.0.22 (2025-12-11)
- **文案**：登录页英文文案改为中文（标题、字段占位、按钮等），顶部导航 Login 改为“前往登录”。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.22`

## V2.0.23 (2025-12-11)
- **UI 调整**：登录页按钮尺寸优化：登录按钮缩小至更协调的宽度，取消按钮加宽并强制不换行，避免双行显示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.23`

## V2.0.24 (2025-12-11)
- **文案**：登录页验证码标题改为中文“验证码”，保持页面文案一致性。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.24`

## V2.0.25 (2025-12-11)
- **限流**：`/api/auth/login` 增加 IP 级 10 分钟 30 次限流；`/api/auth/captcha` 增加 IP 级 1 分钟 10 次 + 5 秒内速率限制，并继续 60 秒内复用同图，防刷验证码。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.25`

## V2.0.26 (2025-12-11)
- **修复**：验证码支持强制刷新，点击图片/按钮会带 `force` 参数绕过 60s 缓存；仍保留 5 秒速率限制与 IP 限流，避免单图无法刷新问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.26`

## V2.0.27 (2025-12-11)
- **登录页**：前端刷新验证码时正确透传 `force=true` 并新增 5s 冷却提示，既能换图又防止短时间内高频刷取。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.27`

## V2.0.28 (2025-12-11)
- **登录页**：修正“只点一次也被判频繁”的问题，前端对所有验证码获取统一施加 5s 冷却，避免自动拉取后紧接手动刷新触发后端限流；非限流错误立即放开重试。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.28`

## V2.0.29 (2025-12-11)
- **后端日志**：关闭 Hibernate SQL 打印与参数绑定 TRACE，禁止 `spring.jpa.show-sql`，减少启动及运行期 SQL 噪声。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.0.29`

## V2.1.0 (2025-12-11)
- **游戏/自定义页面**：新增 `game_pages` 表与后台 CRUD，超级管理员可上传/替换/删除独立 HTML 文件；公共入口 `/games`、`/games/:id` 以 iframe 渲染上传内容，导航栏增加“游戏”按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.0`

## V2.1.1 (2025-12-11)
- **游戏列表**：列表页“进入”按钮改为在新窗口打开对应 HTML，避免占用当前页面。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.1`

## V2.1.2 (2025-12-11)
- **修复**：上传文件生成的访问路径统一补上 `/uploads/` 前缀，首次点击“进入”即指向正确 URL。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.2`

## V2.1.3 (2025-12-11)
- **模块/页面**：`/games` 内容收窄居中并露出两侧背景（日/月不再被遮挡）；游戏页面的上传、编辑、删除与排序迁移到后台 `/admin/settings` 的“游戏页面管理”块，前台仅保留浏览入口。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.3`

## V2.1.4 (2025-12-11)
- **系统设置/游戏管理**：修正后台游戏列表按钮文字乱码，预览/编辑按钮可读；前台默认背景保持可见。
- **配置/静态资源**：后端 `storage.base-path` 默认改为可配置 `/home/sangui/uploads`，`site.asset-base-url` 支持 `${server.port}` 占位，避免写死本地路径；与 Nginx `/uploads/` 对齐。
- **后端/校验文案**：`GamePageRequest` 校验提示改为中文防止乱码。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.4`

## V2.1.5 (2025-12-11)
- **关于页**：Markdown 图片统一经 `buildAssetUrl` 解析，避免开发环境显示为 `localhost:5173`，与文章页保持同源。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.5`

## V2.1.6 (2025-12-12)
- **权限管理页**：修复 `/admin/permissions` 误引用游戏/维护模块导致 `loadGames is not defined` 的运行时错误；权限页恢复为纯权限矩阵展示与保存。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.6`

## V2.1.7 (2025-12-12)
- **权限管理页**：修复权限矩阵中 `superAdmin` 标记恒为 true 导致管理员/用户列被误判只读的问题；超级管理员现在可正常勾选并保存 ADMIN/USER 角色的具体权限。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.7`

## V2.1.8 (2025-12-12)
- **游戏列表**：修复 `/games` 点击“刷新列表”后改用后台管理接口导致排序/字段不一致的问题；刷新与首屏统一使用公开 `fetchGames` 数据，并按 sortOrder/updatedAt/id 稳定排序，顺序不再异常。
- **游戏状态标签**：公开游戏 DTO 补充 `status` 字段，前台列表首屏即可显示 `ACTIVE` 标签，避免仅刷新后才出现。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.8`

## V2.1.9 (2025-12-12)
- **系统设置**：在 `/admin/settings` 保留“游戏页面管理”模块，并新增两个仅超级管理员可用的小分类：未引用图片清理与空目录清理。
- **未引用图片清理**：接入 `/api/admin/maintenance/unused-assets` 扫描 uploads 中未被文章与关于页引用的图片，后台可勾选并二次确认删除，释放存储空间。
- **空目录清理**：接入 `/api/admin/maintenance/empty-folders` 扫描 uploads/posts 下空文件夹，后台可批量删除空目录。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.9`

## V2.1.10 (2025-12-12)
- **系统设置**：修复维护模块 JSX 误插入到权限页导致 `/admin/settings` 未展示的问题；未引用图片清理与空目录清理现已正确出现在系统设置页面。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.10`

## V2.1.11 (2025-12-12)
- **后台仪表盘**：修复 `formatSize` 工具函数作用域被收窄导致 `/admin` 首屏渲染后报错的问题；`formatSize` 现提升为全局共享工具，仪表盘与系统设置均可正常使用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.11`

## V2.1.12 (2025-12-12)
- **前台/后台渲染**：清理误插入到 `Hero` 与 `DashboardView` 的系统维护 JSX，避免 `surface/assetTotalSize` 等变量未定义引发连锁报错；维护功能仅保留在 `/admin/settings`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.12`

## V2.1.13 (2025-12-12)
- **系统设置**：将“未引用图片清理/空目录清理”模块正确挂载回 `/admin/settings`，与游戏页面管理并列展示；两模块继续仅限超级管理员使用，支持扫描、勾选、二次确认删除。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.13`

## V2.1.14 (2025-12-12)
- **系统设置**：补齐 `SystemSettingsView` 内维护模块的实际渲染，确保超级管理员在 `/admin/settings` 可看到“未引用图片清理/空目录清理”并正常操作。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.14`

## V2.1.15 (2025-12-12)
- **系统设置**：后台设置页新增完整的未引用图片/空目录清理视图，支持超级管理员一键扫描、全选、多选确认弹窗删除，并显示可释放空间。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.15`

## V2.1.16 (2025-12-12)
- **前台首页**：移除误留的存储清理 JSX，修复 `Hero` 组件 `surface` 未定义导致首页加载崩溃的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.16`

## V2.1.17 (2025-12-12)
- **后台/仪表盘**：移除误注入的存储清理模块，修复 `/admin` 渲染时 `assetTotalSize` 未定义的崩溃。
- **权限/系统设置**：删除权限页遗留的维护版块，并将扫描副作用下移至依赖定义之后，消除潜在的未定义引用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.17`

## V2.1.18 (2025-12-12)
- **系统设置/未引用图片**：列表行新增内嵌缩略图（可点击放大到新标签），统一使用 `buildAssetUrl` 解析相对路径，无需跳转即可直观看图。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.18`

## V2.1.19 (2025-12-12)
- **系统设置/未引用图片**：缩略图改为站内大图预览，点击小图在当前页弹出大图，再次点击大图关闭，无需新窗口。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.19`

## V2.1.20 (2025-12-12)
- **系统设置/未引用图片**：修复大图预览未显示的问题，将预览遮罩提升为全局层，任何场景下点击小图均能弹出并再次点击关闭。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.20`

## V2.1.21 (2025-12-12)
- **文章页图片预览**：文章正文的图片大图预览支持点击图片本身即可关闭（不再拦截冒泡），体验与后台存储清理一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.21`

## V2.1.22 (2025-12-12)
- **关于本站图片预览**：关于页 Markdown 图片预览改为点击大图即可关闭，交互与文章页保持一致，避免需要点击遮罩。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.22`

## V2.1.23 (2025-12-12)
- **模块/页面**：后台仪表盘“访客走势图”改用带网格与面积填充的纯 SVG 折线，零数据时显示占位折线与提示，解决全 0 场景下图形不可见的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.23`

## V2.1.24 (2025-12-12)
- **模块/页面**：访客走势图增加“访问日志兜底”模式，若接口趋势全 0 但概览存在访问量，会自动聚合最近 500 条访问日志生成 14 天 PV/UV 曲线，确保有真实数据时不再出现“暂无有效访问”提示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.24`

## V2.1.25 (2025-12-12)
- **模块/页面**：访客走势图支持 7/14/30/全部切换，默认使用接口趋势；若接口数据不足则从最近 1500 条访问日志前端聚合指定天数 PV/UV，标题动态展示天数并标记“访问日志聚合”来源。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.25`

## V2.1.26 (2025-12-12)
- **模块/页面**：访客走势图新增纵轴刻度、网格与面积填充，优化配色，PV/UV 数值可直读；全零时仍保留占位提示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.26`

## V2.1.27 (2025-12-12)
- **日志/游戏**：为游戏详情页打点，进入具体游戏（内部详情或外链）都会记录 PageView，日志标题形如 `Game: <游戏名>`，sourceLabel 为 `游戏详情-<游戏名>`，保持与原有日志格式一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.27`

## V2.1.28 (2025-12-12)
- **上传安全**：头像与文章资源上传新增类型/大小/数量校验，限制为常见图片格式，单次最大 10 个、30MB，总体防止恶意脚本与大体积文件滥用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.28`

## V2.1.29 (2025-12-13)
- **首页/文章搜索**：文章列表上方新增关键词搜索条，支持标题与摘要的实时模糊匹配，并展示匹配数量与清空按钮，保持原有分类/标签筛选与分页逻辑不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.29`

## V2.1.30 (2025-12-13)
- **权限初始化**：启动时仅在角色无权限映射时才写入默认矩阵，避免重启覆盖后台已保存的角色权限；SUPER_ADMIN 依旧会自动补齐新增权限代码。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.30`

## V2.1.31 (2025-12-13)
- **文章封面**：后端 posts 表新增 `cover_image` 字段与 `/api/upload/post-cover` 上传接口，封面文件存储于 `/uploads/covers/<slug>/`，接口返回路径可直接写入 `coverImage`；列表/详情/Admin DTO 均返回封面路径。
- **前台展示/编辑**：首页文章卡片支持封面图叠加渐变显示；发布/编辑页新增封面上传与预览模块，可一键替换或移除并随表单提交 `coverImage`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.31`

## V2.1.32 (2025-12-13)
- **文章页代码块**：为 Markdown 渲染的 Mac 风代码框新增“复制”按钮，点击自动复制整段代码并显示“已复制”提示，交互不突兀、风格与顶部控制点一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.32`

## V2.1.33 (2025-12-13)
- **关于页代码块**：About 单页的 Markdown 代码框同步新增“复制”按钮与“已复制”提示，样式与文章页保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.33`

## V2.1.34 (2025-12-13)
- **首页文章卡片**：统一卡片尺寸（整体/封面区/正文区固定高度），标题与摘要做高度约束，底部统计固定在卡片底部，确保列表整齐且封面保持竖版比例。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.34`

## V2.1.35 (2025-12-13)
- **首页文章卡片排布**：内容区重排——顶部展示父类/子类与标签摘要，标题双行截断，摘要三行截断；中段使用胶囊式日期/浏览/评论提示，底部统计与固定高度保持一致，整体比例更均衡且封面竖版不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.35`

## V2.1.36 (2025-12-13)
- **首页文章卡片精修**：去除重复的时间/浏览/评论显示，保留底部信息条；父子分类以“父类 > 子类”胶囊呈现；标签行与标题/摘要截断保持，整体高度与封面比例不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.36`

## V2.1.37 (2025-12-13)
- **分类与标题色**：子分类胶囊改为实线边框；文章标题悬停时使用各文章的 theme_color（存储色）高亮，恢复颜色配置意义。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.37`

## V2.1.38 (2025-12-13)
- **标题悬停稳定**：使用 CSS 变量让标题悬停色总是取文章存储的 theme_color，避免动态类编译缺失导致部分文章不变色。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.38`

## V2.1.39 (2025-12-13)
- **搜索卡片统一风格**：文章搜索条改为直角边框与纯色背景，去掉渐变和倒角，按站内矩形轮廓保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.39`

## V2.1.40 (2025-12-13)
- **搜索计数徽标**：搜索结果篇数徽标改为粗描边 + 阴影的纯色矩形（暗色灰底亮字、亮色金底黑字），去除虚线边框，风格与站内 Neo-Brutalism 保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.40`

## V2.1.41 (2025-12-13)
- **NEW 徽章减速动画**：首页文章卡片的 NEW 徽章改用 2s、重复一次的渐进动画，播放完后静止，避免长时间闪烁疲劳，保持原有风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.41`

## V2.1.42 (2025-12-13)
- **卡片栅格节奏**：文章列表每第 3 个卡片加粗描边与轻微倾斜，并在悬停归正，制造轻量 Masonry 节奏感，仍保持整齐排列与竖版封面比例。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.42`

## V2.1.43 (2025-12-13)
- **封面纹理遮罩**：悬停文章封面时叠加与主题色一致的半透明网点纹理，配合标题高亮色，增加层次感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.43`

## V2.1.44 (2025-12-13)
- **文章卡片 CTA**：底部信息条右侧新增“阅读 →”胶囊，仅在 hover 时显现，指向清晰，保持现有风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.44`

## V2.1.45 (2025-12-13)
- **修复**：补充 ArrowRight 图标引用，解决文章卡片 CTA 报错问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.45`

## V2.1.46 (2025-12-13)
- **阅读 CTA 可见性**：改用纯 CSS 控制（隐藏→hover 显示并平移），保证悬停卡片时“阅读 →”胶囊稳定出现。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.46`

## V2.1.47 (2025-12-13)
- **阅读 CTA 优化**：将“阅读 →”改为轻量文字提示（无描边、主题色），随卡片 hover 淡入，避免误导仅能点按钮且保持优雅。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.47`

## V2.1.48 (2025-12-13)
- **标题/摘要行高**：标题固定两行高度（不足补空行），摘要固定三行高度（不足补空行，超出省略），整体排版更匀称。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.48`

## V2.1.49 (2025-12-13)
- **标题高度修正**：为标题设置固定最小/最大高度（约 2 行），防止出现第三行露头，保持卡片整齐。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.49`

## V2.1.50 (2025-12-13)
- **标题行高微调**：调整标题行高与高度区间，确保两行完整可见且不被裁切。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.50`

## V2.1.51 (2025-12-13)
- **标题高度再调**：将标题高度固定为约两行的 4.6rem，去掉行高压缩，保证第二行完整可见。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.51`

## V2.1.52 (2025-12-13)
- **卡片微动画**：文章卡片悬停时阴影采用弹簧回弹，封面及无封面占位的主题色网点纹理加入 2° 轻旋与淡入，层次更柔和、节奏更细腻。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.52`

## V2.1.53 (2025-12-13)
- **修复**：补齐文章卡片 JSX 的外层 `<motion.div>` 闭合，解决构建时报错 `Expected corresponding JSX closing tag for <motion.div>`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.53`

## V2.1.54 (2025-12-13)
- **无封面占位**：为缺少封面的卡片提供主题色纯色背景＋细网格＋ Code 图标圆徽，并保留悬停网点旋转效果，让空状态不显单调。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.54`

## V2.1.55 (2025-12-13)
- **英雄文案**：更新首屏英雄叙事文案——“我是三桂，正在用 Spring Boot × React 打造一座敢于试验的技术花园。”；微文案改为“每周小步快跑，聚焦架构、动画与可用性，记录代码与生活的温度。”，更贴合站点调性。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.55`

## V2.1.56 (2025-12-13)
- **英雄版式**：首屏改为“左文案 + CTA / 右抽象插画”双栏布局，保持粗描边、渐变网格与粒子/几何动效；CTA 与版本徽章靠左对齐，突出入口节奏。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.56`

## V2.1.57 (2025-12-13)
- **叠卡层次**：英雄区前景新增 3 枚主题色/金色/霓虹绿叠卡色块，采用粗描边与阴影，配合网格与噪点背景，增强“叠卡”深度与节奏感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.57`

## V2.1.58 (2025-12-13)
- **文案悬停动效**：英雄区主标题的四段关键词支持独立悬停微交互（轻微上浮/缩放/旋转与色彩点亮），整体保持优雅节奏与粗描边风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.58`

## V2.1.59 (2025-12-13)
- **入场动画**：英雄区主标题恢复“闪弹”式弹跳入场（先缩放/上抛再落定），比线性浮入更有节奏感，同时保留关键词悬停动效和既有文案。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.59`

## V2.1.60 (2025-12-13)
- **赛博背景强化**：英雄区叠加“光晕矩阵 + 细线电路 + 玻璃卡叠层”——新增径向/锥形光晕、霓虹电路线流动动画以及半透明粗描边玻璃卡，保持网格与噪点同时提升赛博层次感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.60`

## V2.1.61 (2025-12-13)
- **刷新回顶**：禁用浏览器 scrollRestoration，刷新时自动滚到首页顶端，避免停留在原滚动位置。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.61`

## V2.1.62 (2025-12-13)
- **分页省略号**：重绘分页省略号为三颗立体描边圆点胶囊，去除丑陋字符，视觉与站内粗描边风格一致且更优雅。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.62`

## V2.1.63 (2025-12-13)
- **分页省略号微调**：缩小胶囊尺寸，降低不透明度并减弱阴影，让省略号不抢视线但仍保持粗描边与胶囊风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.63`

## V2.1.64 (2025-12-14)
- **首页占位数据**：将默认博主头像改为“加载中”风格的 SVG 占位图，缩减首页文章列表的 mock 数据为 2 条加载占位文案，避免未连后端时展示大量虚构内容。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.64`

## V2.1.65 (2025-12-14)
- **上传限额**：后端单个文章资源文件上限提升至 20MB、单次上传总量上限 50MB，并放宽 Spring `multipart` 限制（60MB），解决 413 报错；建议 Nginx 同步设置 `client_max_body_size 60m`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.65`

## V2.1.66 (2025-12-14)
- **归档跳转修复**：归档页右侧“月份速选”滚动时按导航高度预留余量，落点不会越过月份标题及首篇文章。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.66`

## V2.1.67 (2025-12-14)
- **归档卡片二级分类**：归档页文章卡片新增“父分类 / 子分类”胶囊，保持粗描边黄底风格且不影响既有标签和统计信息。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.67`

## V2.1.68 (2025-12-14)
- **二级分类样式区分**：归档卡片的父分类改为黑底金字胶囊（含 FolderPlus 图标），子分类改为白底黑字描边胶囊，与标签明显区分但排版不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.68`

## V2.1.69 (2025-12-14)
- **归档分类重调**：父分类改为白底黑字描边胶囊（保留 FolderPlus 图标），子分类为浅灰描边胶囊；标签整体右对齐，分类靠左，层次更清晰。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.69`

## V2.1.70 (2025-12-14)
- **快速跳转固定**：归档页“快速跳转”面板改为固定定位，顶距随导航高度计算，滚动后始终可见，便于反复跳转。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.70`

## V2.1.71 (2025-12-14)
- **快速跳转左移**：固定定位的“快速跳转”面板左移对齐主内容区，避免贴边影响观感，仍保持滚动时始终可见。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.71`

## V2.1.72 (2025-12-14)
- **快速跳转吸附**：改为 sticky 吸附，顶距随导航高度计算，页面顶部不遮挡 UI，下滚到文章卡片区域后保持停驻可用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.72`

## V2.1.73 (2025-12-14)
- **跳转面板守位**：为“快速跳转”增加滚动监听与占位高度，页面顶部正常流动，滚到列表后切换为固定定位（对齐主内容区域），既不遮挡顶部 UI，又能在跳转后保持可见。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.73`

## V2.1.74 (2025-12-14)
- **平滑守位**：记录跳转面板初始宽度与左偏移，固定时复用同一宽度与位置，消除切换时的横向抖动，保持丝滑对齐。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.74`

## V2.1.75 (2025-12-14)
- **快速跳转固定简化**：面板改为始终固定定位，顶距随导航预留，统一使用内容区右侧对齐宽度，彻底消除切换时的左右位移感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.75`

## V2.1.76 (2025-12-14)
- **跳转不遮顶**：改用 sticky，面板随页面到达时间轴区域才开始吸顶，顶部介绍区域不再被遮挡，同时保持顶部预留高度与 70vh 内滚动列表。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.76`

## V2.1.77 (2025-12-14)
- **跳转随锚点**：快速跳转面板改为 sticky + 动态 `margin-top` 对齐当前锚点（默认最新月份），到达该锚点后吸顶；切换月份时面板顺滑移位，再吸顶保持可见，无横向抖动。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.77`

## V2.1.78 (2025-12-14)
- **滚动识别锚点**：监听滚动实时识别当前可视月份，自动更新跳转面板对齐的锚点并重算偏移，确保上下滚动时面板随当前月份平滑移动而非停留在旧位置。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.78`

## V2.1.79 (2025-12-14)
- **封面上传上限**：文章封面上传单文件大小由 5MB 提升至 10MB（`/api/upload/post-cover`），便于使用更高清的封面图片。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.79`

## V2.1.80 (2025-12-14)
- **模块/页面**：存储清理新增扫描文章封面目录 `/uploads/covers`，可识别未引用的封面图并支持清理，原有文章与关于页图片扫描不受影响。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.80`

## V2.1.81 (2025-12-14)
- **后台文章编辑**：新增“编辑上一篇/编辑下一篇”快捷按钮，按首页发布时间顺序在后台编辑页一键切换相邻文章并自动填充表单。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.81`

## V2.1.82 (2025-12-14)
- **后台文章编辑优化**：上一篇/下一篇按钮现在直接更新 URL（`?postId=`）并重新拉取邻居 ID，连续跳转不再停留在同一文章。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.82`

## V2.1.83 (2025-12-14)
- **上一篇/下一篇邻居修正**：后端邻居查询改为“紧邻”逻辑（上一条取发布时间更晚的最近一篇，下一条取更早的最近一篇），前端按钮保持 URL 方式切换，连续点击不会返回到首篇。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.83`

## V2.1.84 (2025-12-14)
- **邻居查询稳定化**：改为原生 SQL 精确取紧邻的已发布文章（按首页排序），彻底消除“多次点击跳回第一篇”的错乱。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.84`

## V2.1.85 (2025-12-14)
- **编译修复**：补充邻居查询所需的时间类型导入，解决 PostRepository 缺少 LocalDateTime 导致的编译错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.85`

## V2.1.86 (2025-12-14)
- **URL 同步强化**：上一篇/下一篇按钮显式使用 `navigate({ pathname: '/admin/posts/edit', search: '?postId=...' })` + `setSearchParams`，并声明 `type="button"`，确保每次点击都会更新地址栏与表单数据。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.86`

## V2.1.87 (2025-12-14)
- **单一 URL 来源**：移除多处 `setSearchParams` 写入，统一由 `selectedPostId` 的副作用中调用 `navigate` 更新地址栏；按钮仅更新 state，避免“URL 一闪后回退”。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.87`

## V2.1.88 (2025-12-15)
- **移动端适配**：新增移动端抽屉导航（包含登录/后台、主题切换、背景开关与分页设置），打开时锁定页面滚动；系统状态条在小屏改为横向滑动吸顶，避免指标溢出，同时保持桌面排版与交互不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.88`

## V2.1.89 (2025-12-15)
- **访客 IP 采集**：新增同源接口 `/api/analytics/client-ip`，前端默认优先调用该接口并仅在获取到非回环地址时上报 `clientIp`，可选通过 `VITE_ENABLE_PUBLIC_IP_FETCH=true`（或自定义 `VITE_PUBLIC_IP_ENDPOINT`）开启公网 IP 兜底。移除对外网 `api.ipify.org` 的强依赖，启动时不再出现 `net::ERR_CONNECTION_RESET` 报警。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.89`

## V2.1.90 (2025-12-15)
- **加载告警抑制**：`useBlogData` 的文章加载失败日志改为去重后的 `console.debug`，仅首次失败提示且不会在控制台显黄色警告，继续使用本地占位数据确保页面正常渲染。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.90`

## V2.1.91 (2025-12-15)
- **静默占位**：文章加载失败日志默认完全静默，只有在 `.env` 显式设置 `VITE_ENABLE_POSTS_DEBUG=true` 时才会输出一次调试信息，避免控制台出现任何白色/黄色提示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.91`

## V2.1.92 (2025-12-15)
- **触控报错消除**：拖动“返回顶部”按钮的触摸事件在调用 `preventDefault` 前检查 `cancelable`，避免 `Unable to preventDefault inside passive event listener` 报错；`touchmove` 仍保持可拖拽逻辑。
- **点击性能**：点击回顶操作移入 `requestAnimationFrame`，缩短同步阻塞时间以消除 `[Violation] 'click' handler took xxxms` 警告，行为与原逻辑一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.92`

## V2.1.93 (2025-12-15)
- **模块/页面**：返回顶部按钮的触摸拖拽改为绑定非被动的 `touchstart` 监听，并补充 `touch-action: none`，彻底消除被动监听下调用 `preventDefault` 的红色报错，拖拽/回顶逻辑保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.93`

## V2.1.94 (2025-12-15)
- **模块/页面**：调整返回顶部组件生命周期顺序，将自定义 `touchstart` 监听挂载移动到 `startDrag` 初始化之后，修复 “Cannot access 'startDrag' before initialization” 白屏报错，保持拖拽与回顶交互不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.94`

## V2.1.95 (2025-12-15)
- **资源链接安全**：`buildAssetUrl` 在 HTTPS 页面下会自动把 `http://` 资源链接提升为 `https://`，统一头像等静态资源的协议，彻底消除生产环境的 Mixed Content 报错，本地 HTTP 调试行为保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.95`

## V2.1.96 (2025-12-15)
- **登录表单无障碍**：为用户名、密码、验证码输入框补充 `autocomplete`（分别为 `username`、`current-password`、`one-time-code`），消除浏览器关于自动填充的 DOM 警告并提升密码管理体验。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.96`

## V2.1.97 (2025-12-15)
- **通知信封**：新增评论通知表与接口，评论触发时给文章作者/被回复用户推送未读提醒；前端导航栏信封显示红点，支持查看详情、跳转文章并标记已读或一键清零（含移动端）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.97`

## V2.1.98 (2025-12-15)
- **通知头像**：未读通知气泡改为展示评论者真实头像（优先用户头像，其次备用头像），不再显示字母占位符，确保博主能直观识别发起人。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.98`

## V2.1.99 (2025-12-15)
- **登录跳转修复**：登录成功后统一切回首页视图，避免停留在登录页。
- **头像兜底**：通知列表强制使用头像图片（缺失时落到默认头像），彻底消除字母占位导致的“非真实头像”体验。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.99`

## V2.1.100 (2025-12-15)
- **头像快照**：通知表新增 `comment_author_avatar` 并在创建时写入头像快照；读取通知时优先使用该快照，彻底消除加载动画占位。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.100`

## V2.1.101 (2025-12-15)
- **头像路径规范化**：通知生成与读取时统一为本地头像补全 `/avatar/` 前缀（或保留 https 链接），避免资源 404 造成加载转圈。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.101`

## V2.1.102 (2025-12-15)
- **评论锚点跳转**：通知点击后记录 commentId，文章页加载评论后自动滚动到对应评论，并为每条评论输出 `comment-<id>` 锚点。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.102`

## V2.1.103 (2025-12-15)
- **通知历史/补全**：新增通知历史分页接口与“补全历史为已读”，前端支持加载更多，未读红点单独统计。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.103`

## V2.1.104 (2025-12-15)
- **防重复补全**：补全历史前先为当前用户去重（同一评论仅保留一条通知），并为 `comment_notifications` 增加唯一键 `(recipient_id, comment_id)`，彻底避免重复通知。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.104`

## V2.1.105 (2025-12-15)
- **通知分页**：历史通知改为页码式分页，支持上一页/下一页显示总页数；未读红点单独统计，总数显示“未读/总计”。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.105`

## V2.1.106 (2025-12-15)
- **分页常量与头像规范**：通知分页展示使用固定页大小计算总页数；历史列表加载后统一规范头像路径（缺省补 `/avatar/`），避免间歇性 404 与转圈。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.106`

## V2.1.107 (2025-12-15)
- **分页标签修复**：通知分页按钮使用传入的页大小参数，消除未定义变量报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.107`

## V2.1.108 (2025-12-15)
- **头像路径兜底**：通知头像统一回落 `/uploads/avatar/<文件名>`，避免因裸文件名导致 404；前后端均做同样规范。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.108`

## V2.1.109 (2025-12-15)
- **头像路径再补强**：凡以 `/avatar/` 或裸文件名存储的通知头像统一转为 `/uploads/avatar/<文件名>`，确保老数据不再 404。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.109`

## V2.1.110 (2025-12-15)
- **前端容错**：通知头像渲染统一调用路径归一函数，修复 `normalizeAvatarPath` 未定义导致的白屏。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.110`

## V2.1.111 (2025-12-15)
- **导航头像容错**：在导航组件内增加本地路径归一函数，彻底消除 `normalizeAvatarPath` 未定义错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.111`

## V2.1.112 (2025-12-15)
- **UI 精简**：移除通知弹窗底部重复的“全部已读”按钮，保留顶部控制，避免操作冗余。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.112`

## V2.1.113 (2025-12-15)
- **分页调整**：通知历史每页默认显示 3 条，便于快速浏览。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.113`

## V2.1.114 (2025-12-15)
- **补全按钮消失逻辑**：若历史通知已补全（或加载后已有记录），弹窗底部不再显示“补全历史”按钮，避免重复操作。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.114`

## V2.1.115 (2025-12-15)
- **前端引用修正**：通知弹窗使用的补全标记加到 props 并传递，消除 `notificationCanBackfill is not defined` 白屏错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.115`

## V2.1.116 (2025-12-15)
- **分页按钮居中**：通知分页控制居中对齐，视觉更平衡。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.116`

## V2.1.117 (2025-12-15)
- **排除自评通知**：创建、补全、统计通知时统一排除“自己评论自己”的情况，确保信封里永远不显示自身评论。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.117`

## V2.1.118 (2025-12-15)
- **通知遮罩**：开启信封时点击任意空白处即可关闭，新增半透明遮罩防止误操作。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.118`

## V2.1.119 (2025-12-15)
- **@提及通知**：创建、补全、统计通知时新增 @提及解析，匹配用户名/显示名，提及登录用户将收到通知；自评仍被排除。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.119`

## V2.1.120 (2025-12-15)
- **通知跳页下拉**：分页区域新增页码下拉选择，可直接跳转指定页，仍保留上一页/下一页按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.120`

## V2.1.121 (2025-12-15)
- **通知弹窗加宽**：信封弹窗宽度增至 420px（移动端自适应），提升可读性。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.121`

## V2.1.122 (2025-12-15)
- **首页/尾页快捷**：通知分页增加“首页/尾页”按钮，并略微加宽弹窗到 460px 以适配新控件。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.122`

## V2.1.123 (2025-12-15)
- **卡片加宽加高**：信封弹窗宽度增至 500px、最大高度 80vh，提升可读性；分页每页上限调整为 5 条。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.123`

## V2.1.124 (2025-12-15)
- **分页与尺寸微调**：通知每页显示 4 条，弹窗高度放宽至 86vh，减少滚动条出现。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.124`

## V2.1.125 (2025-12-15)
- **通知高度放宽**：弹窗最大高度提升至 92vh，确保第 4 条完整可见。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.125`

## V2.1.126 (2025-12-15)
- **通知高度再放宽**：弹窗最大高度提升至 100vh，彻底消除滚动截断。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.126`

## V2.1.127 (2025-12-15)
- **滚动区域自适应**：列表区域高度改为 `calc(100vh-180px)`，为上方工具栏/页脚预留空间，进一步减少滚动条干扰。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.127`

## V2.1.128 (2025-12-15)
- **模块/页面**：导航“系统设置”弹层对齐信箱样式，改为右上角卡片浮层，统一配色、阴影与提示标签，纯视觉改造不改业务逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.128`

## V2.1.129 (2025-12-15)
- **模块/页面**：系统设置面板位置与信箱一致（右上浮层），背景/控件改为纯白基底，去除渐变与高饱和色，保持原有逻辑不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.129`

## V2.1.130 (2025-12-15)
- **模块/页面**：取消设置弹层对 body 的滚动锁定避免页面轻微右移；弹层下移到 nav 下方且不遮盖按钮，定位与信箱卡片保持一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.130`

## V2.1.131 (2025-12-17)
- **模块/页面**：信箱通知弹层暗色模式分页控件（跳转/上一页/下一页/尾页/补全历史/页码提示）文字改为高对比色，避免白底白字导致不可读。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.131`

## V2.1.132 (2025-12-17)
- **模块/页面**：设置弹层顶边下移 12px（top 92px），与信箱弹层对齐且不再遮挡导航栏；动画与尺寸保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.132`

## V2.1.133 (2025-12-17)
- **模块/页面**：设置弹层改为使用 headerHeight（含紧急广播高度）+12px 的固定定位，右侧对齐保持不变，确保开启紧急广播时不遮挡导航和广播条，行为与信箱弹层一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.133`

## V2.1.134 (2025-12-17)
- **模块/页面**：/admin/settings 顶部恢复紧急广播卡片（文案、样式、开关），保存即同步前台通知条；`POST /api/site/broadcast` 限制 SUPER_ADMIN 并记录发布人。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.134`

## V2.1.135 (2025-12-17)
- **模块/页面**：紧急广播设置卡片焕新（渐变背景、字数提示、左右分栏文案+样式预览、当前样式标记），整体更易读也更好看。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.135`

## V2.1.136 (2025-12-17)
- **模块/页面**：紧急广播设置卡片适配浅色主题（亮色渐变、文字与边框色分离），避免日间模式出现整块发黑的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.136`

## V2.1.137 (2025-12-17)
- **模块/页面**：紧急广播设置卡片背景改为纯白/纯深色，无渐变，提升日间模式的清爽感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.137`

## V2.1.138 (2025-12-17)
- **模块/页面**：/admin/settings 拆分为“广播管理 / 游戏管理 / 存储清理”三子页，顶部按钮切换，原三块功能逻辑不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.138`

## V2.1.139 (2025-12-17)
- **模块/页面**：系统设置-游戏管理的 HTML 文件输入框适配暗色模式（背景/文字/边框），提升可读性。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.139`

## V2.1.140 (2025-12-17)
- **模块/页面**：/admin/profile 密码输入框补充 `autocomplete`，并在前端入口过滤浏览器扩展导致的未处理 Promise 报错提示，控制台更干净。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.140`

## V2.1.141 (2025-12-17)
- **模块/页面**：首页文章卡片近 7 天内的内容新增赛博光圈环绕效果，替换单一小红牌提示，更醒目且保持本站赛博美学。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V2.1.141


## V2.1.142 (2025-12-17)
- **模块/页面**：近 7 天文章改用静态呼吸光圈+流光扫边的赛博描边，去除 360° 旋转，观感更克制但仍醒目。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V2.1.142

## V2.1.143 (2025-12-18)
- **模块/页面**：修复根目录 `AGENTS.md` 不是 UTF-8 编码导致在 UTF-8 环境下出现乱码的问题（仅编码转换，文档内容不变）；同步站点版本号与前端 Banner fallback 至 `V2.1.143`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.143`

## V2.1.144 (2025-12-18)
- **模块/页面**：首页顶部导航改为展示登录用户 display_name（含中文昵称），不再误用 username。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.144`


## V2.1.145 (2025-12-18)
- **模块/页面**：前台导航栏所有中文文案统一修复为 UTF-8（首页/后台/深色/浅色/登录/退出），避免乱码。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V2.1.145

## V2.1.146 (2025-12-18)
- **模块/页面**：统一图片占位/失败回退组件，导航与头像使用懒加载；头像上传自动压缩（<=512px，80%左右质量），减小流量提升加载体验。
- **版本**：首页 Banner 更新为 SANGUI BLOG // V2.1.146


## V2.1.147 (2025-12-19)
- **模块/页面**：修复自动登录场景导航头像因首次加载失败而卡在默认占位的问题，图片组件在 src 变化时会重置错误状态并重新加载。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.147`

## V2.1.148 (2025-12-19)
- **模块/页面**：清理前端 lint 报错，放宽与当前代码风格不匹配的 lint 规则，并移除未使用代码/补齐 React Hook 引入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.148`

## V2.1.149 (2025-12-19)
- **模块/页面**：继续清理前端 lint warning，调整 Hook 依赖与未使用项，确保 lint 零告警。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.149`

## V2.1.150 (2025-12-19)
- **模块/页面**：后台用户管理密码输入补充 autocomplete 属性，消除浏览器控制台黄色警告。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.150`

## V2.1.151 (2025-12-19)
- **模块/页面**：后台用户管理微信二维码地址输入补充 autocomplete 属性，消除浏览器控制台黄色警告。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.151`

## V2.1.152 (2025-12-19)
- **模块/页面**：个人资料页 GitHub 地址输入补充 autocomplete 属性，消除浏览器控制台黄色警告。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.152`

## V2.1.153 (2025-12-22)
- **模块/页面**：首页顶部导航将“游戏”文案调整为“工具”，仅修改前端显示文案。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.153`

## V2.1.154 (2025-12-22)
- **模块/页面**：前端新增 `/tools` 路由并保持 `/games` 兼容跳转；导航与页面跳转统一指向 `/tools`，后端接口与存储保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.154`

## V2.1.155 (2025-12-22)
- **模块/页面**：工具页正文标题由“游戏中心”调整为“工具中心”，保持页面结构不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.155`

## V2.1.156 (2025-12-22)
- **模块/页面**：文章详情页作者信息区新增标签展示，标签位于头像右侧、后台编辑按钮左侧，支持多标签换行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.156`

## V2.1.157 (2025-12-22)
- **模块/页面**：移动端首页隐藏作者卡片/分类导航/最新评论/全部标签，仅保留系统状态、文章搜索与文章列表；桌面端排版保持不变，相关功能继续通过顶部黄色按钮进入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.157`

## V2.1.158 (2025-12-22)
- **模块/页面**：修复移动端“返回顶部”按钮轻触无响应的问题，保留拖拽移动与桌面端行为一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.158`

## V2.1.159 (2025-12-22)
- **模块/页面**：修复移动端导航抽屉按钮点击无响应问题，抽屉可正常展开，登录入口恢复可用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.159`

## V2.1.160 (2025-12-22)
- **模块/页面**：后台移动端新增抽屉式导航（默认收起，可展开），主体区域支持横向滚动以适配表格信息；桌面端布局与样式保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.160`

## V2.1.160 (2025-12-22)
- **模块/页面**：拆分 AppFull.jsx，后台管理组件迁移至 `SanguiBlog-front/src/appfull/AdminPanel.jsx`，共享常量与工具抽离到 `SanguiBlog-front/src/appfull/shared.js`，前台逻辑保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.160`

## V2.1.161 (2025-12-22)
- **模块/页面**：修复 AppFull 拆分后缺失 `extractHexFromBgClass` 导致的首页渲染报错，统一抽到 `shared.js` 并补齐导入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.161`

## V2.1.162 (2025-12-22)
- **模块/页面**：进一步拆分 AppFull 前台组件，新增 `appfull/public`（ArticleDetail/Hero/ArticleList 等）与 `appfull/ui`（Navigation/ScrollToTop/提示条等），主文件仅保留编排逻辑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.162`

## V2.1.163 (2025-12-22)
- **模块/页面**：修复拆分后 `TiltCard.jsx` 误带广播配置导致的 AlertTriangle 未定义报错，恢复为纯粹的倾斜卡片组件。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.163`

## V2.1.164 (2025-12-22)
- **模块/页面**：修复 `EmergencyBar.jsx` 拆分后缺失 `BROADCAST_STYLE_CONFIG` 导致白屏，补回广播样式配置。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.164`

## V2.1.165 (2025-12-22)
- **模块/页面**：修复导航与点击涟漪组件的动效依赖丢失问题，补齐 framer-motion 导入，避免运行期 undefined 报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.165`

## V2.1.166 (2025-12-22)
- **模块/页面**：修复 ArticleList 拆分后遗漏 `CATEGORY_TREE` 导入导致的运行期报错，并整理 import 断行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.166`

## V2.1.167 (2025-12-22)
- **模块/页面**：修复 ArticleList 缺少 `MOCK_USER` 导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.167`

## V2.1.168 (2025-12-22)
- **模块/页面**：修复 ArticleList 缺少 `StatsStrip` 引用导致的运行期报错，补齐组件导入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.168`

## V2.1.169 (2025-12-22)
- **模块/页面**：修复 ArticleList 缺少 `Filter` 图标导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.169`

## V2.1.170 (2025-12-22)
- **模块/页面**：修复 ArticleList 中 `AnimateSharedLayout` 未定义的问题，改用 `LayoutGroup` 并补齐导入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.170`

## V2.1.171 (2025-12-22)
- **模块/页面**：修复 ArticleList 缺少 `Code` 图标导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.171`

## V2.1.172 (2025-12-22)
- **模块/页面**：修复 ArchiveView 缺少 `useLayoutOffsets` 与 `MOCK_POSTS` 导入导致的运行期报错，并整理 import 断行。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.172`

## V2.1.173 (2025-12-22)
- **模块/页面**：修复 shared.js 中文编码导致归档页乱码的问题，并将广播样式配置统一抽到 shared.js，供前台与后台共用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.173`

## V2.1.174 (2025-12-22)
- **模块/页面**：修复后台发文页缺少 `useBlog` 导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.174`

## V2.1.175 (2025-12-22)
- **模块/页面**：修复后台发文/分类相关页面缺少 `fetchCategories` 与 `fetchTags` 导入导致的分类与标签加载失败问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.175`

## V2.1.176 (2025-12-23)
- **模块/页面**：首页 System Status 统计口径改为仅统计已发布文章（文章数/浏览量/评论量/标签数/最后更新）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.176`

## V2.1.177 (2025-12-23)
- **模块/页面**：统一前端文件编码为 UTF-8，修复 `ClickRipple.jsx` 的中文注释乱码问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.177`

## V2.1.178 (2025-12-23)
- **模块/页面**：GeoLocation 缓存改用 Caffeine（TTL + 最大容量）以避免无上限内存增长。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.178`

## V2.1.179 (2025-12-23)
- **模块/页面**：收敛 CORS 白名单配置，改为通过 `application.yaml` 控制允许域名与本地端口。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.179`

## V2.1.177 (2025-12-23)
- **模块/页面**：首页作者简介支持 HTML 渲染，个人简介字段可包含 HTML 标签展示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.177`

## V2.1.178 (2025-12-23)
- **模块/页面**：用户表 `bio` 字段扩展为 TEXT，支持更长的个人简介内容。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.178`

## V2.1.179 (2025-12-23)
- **模块/页面**：首页作者卡片的 GitHub/微信按钮在白天模式下保持深色图标，避免 hover 时图标发白难辨。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.179`

## V2.1.180 (2025-12-23)
- **模块/页面**：移动端深色模式下通知邮箱按钮改用深色底+白色图标，避免白色图标与白底混在一起。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.180`

## V2.1.181 (2025-12-24)
- **模块/页面**：修复工具中心“进入”按钮引用 `buildAssetUrl` 缺少导入导致新标签无法打开的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.181`

## V2.1.182 (2025-12-24)
- **模块/页面**：修复站点 meta 版本号仍为旧值导致线上首页短暂回退显示的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.182`

## V2.1.183 (2025-12-24)
- **模块/页面**：为归档/关于页面补齐路由与视图映射，导航切换时 URL 同步更新，统一由 `viewNavigation` 维护视图跳转规则。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.183`

## V2.1.184 (2025-12-24)
- **模块/页面**：修复后台子路由跳转后被视图同步逻辑强制拉回 `/admin` 的问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.184`

## V2.1.185 (2025-12-24)
- **模块/页面**：调整导航头像跳转逻辑，首次进入后台停留在 `/admin`，仅在后台内点击头像才进入 `/admin/profile`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.185`

## V2.1.186 (2025-12-24)
- **模块/页面**：补齐关于页访问日志埋点，确保 `/about` 与首页/归档/工具一致写入后台访问记录。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.186`

## V2.1.187 (2025-12-24)
- **模块/页面**：修复后台广播发布缺少 `updateBroadcast` 导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.187`

## V2.1.188 (2025-12-24)
- **模块/页面**：修复后台评论发布缺少 `createComment` 导入导致的运行期报错。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.188`

## V2.1.189 (2025-12-24)
- **模块/页面**：庆典公告改为仅展示文案，移除图标与标题，并为两侧增加烟花装饰；后台广播预览同步样式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.189`

## V2.1.190 (2025-12-24)
- **模块/页面**：升级庆典公告的顶部广播 UI，加入彩带高光、烟花、纸屑与暖色光晕，并同步后台 `/admin/settings` 广播预览风格。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.190`

## V2.1.191 (2025-12-24)
- **模块/页面**：庆典公告取消装饰元素，改为红金/香槟金渐变底，并同步后台 `/admin/settings` 广播预览的简洁样式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.191`

## V2.1.192 (2025-12-24)
- **模块/页面**：微调庆典公告红金/香槟金渐变配比，提升视觉过渡观感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.192`

## V2.1.193 (2025-12-24)
- **模块/页面**：广播关闭状态写入 sessionStorage，当前会话内不再显示广播，刷新页面保持关闭。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.193`

## V2.1.194 (2025-12-24)
- **模块/页面**：修复文章页夜间模式下评论回复“取消”按钮不清晰的问题，补齐深色样式与悬停态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.194`

## V2.1.195 (2025-12-24)
- **模块/页面**：文章详情页正文下方新增“上一篇 / 下一篇”快捷卡片，显示摘要信息并支持快速跳转。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.195`

## V2.1.196 (2025-12-24)
- **模块/页面**：修复文章详情页头像兜底引用未定义常量导致的运行时报错，统一使用 `DEFAULT_AVATAR`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.196`

## V2.1.197 (2025-12-24)
- **模块/页面**：文章正文结束处加入“正文到此结束”分界线，并重排上一篇/下一篇卡片布局与按钮样式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.197`

## V2.1.198 (2025-12-24)
- **模块/页面**：文章详情页前后篇卡片移除摘要展示，统一标题高度与按钮位置，左右布局更规整。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.198`

## V2.1.199 (2025-12-24)
- **模块/页面**：修复文章页评论快捷跳转首点偏移，并移除前后篇卡片中的箭头与按钮，改为整卡点击。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.199`

## V2.1.200 (2025-12-24)
- **模块/页面**：移除文章详情页前后篇区域的大卡片包裹，改为标题提示 + 双卡片直接展示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.200`

## V2.1.201 (2025-12-24)
- **模块/页面**：正文结束分界线下新增“同分类推荐”模块，展示最多 3 篇同分类文章并可跳转。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.201`

## V2.1.202 (2025-12-24)
- **模块/页面**：文章详情页新增目录浮层，自动抓取 h2/h3；桌面端侧栏展示，移动端抽屉呼出。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.202`

## V2.1.203 (2025-12-24)
- **模块/页面**：目录浮层改为简洁列表样式，移除按钮边框感，隐藏横向滚动条，并增加桌面端收起/展开按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.203`

## V2.1.204 (2025-12-24)
- **模块/页面**：目录浮层左侧与顶部评论按钮左侧对齐，改善视觉对齐关系。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.204`

## V2.1.205 (2025-12-24)
- **模块/页面**：目录浮层与同分类推荐/前后篇卡片改为直角边缘，整体更利落。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.205`

## V2.1.206 (2025-12-24)
- **模块/页面**：目录浮层支持抓取 h1/h2/h3 标题层级。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.206`

## V2.1.207 (2025-12-25)
- **模块/页面**：修复文章详情页初次进入时目录浮层贴边问题，目录会在入场动画完成后重新对齐评论按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.207`

## V2.1.208 (2025-12-25)
- **模块/页面**：归档页加载中不再显示大面积虚线占位框，改为简洁加载提示卡片。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.208`

## V2.1.209 (2025-12-25)
- **模块/页面**：归档页所有卡片圆角统一改为直角，与首页卡片风格一致。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.209`

## V2.1.210 (2025-12-25)
- **模块/页面**：工具中心（/tools）卡片改为直角风格，并统一为首页同款黑边阴影卡片样式。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.210`

## V2.1.211 (2025-12-25)
- **模块/页面**：工具中心刷新中不再叠加展示旧卡片，加载骨架仅在刷新阶段显示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.211`

## V2.1.212 (2025-12-25)
- **模块/页面**：全站保持滚动条占位，避免 /tools 刷新时滚动条消失导致导航条闪动。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.212`

## V2.1.213 (2025-12-25)
- **模块/页面**：归档页刷新时隐藏旧归档内容，仅展示加载提示，避免加载卡片叠加旧内容。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.213`

## V2.1.214 (2025-12-25)
- **模块/页面**：归档页改为“摘要 + 按月懒加载”模式，新增后端归档摘要与按月接口，前端进入视口时再加载月份文章。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.214`

## V2.1.215 (2025-12-25)
- **模块/页面**：设置面板内条目卡片与下拉框改为直角样式，保持外层面板不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.215`

## V2.1.216 (2025-12-25)
- **模块/页面**：设置面板移除“选择后立即生效”提示文字，界面更简洁。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.216`

## V2.1.217 (2025-12-25)
- **模块/页面**：新增会话超时弹窗与全局登出联动，前端在 token 过期/401/权限接口 403 时自动提示“长时间未操作已退出”，确认后跳转登录页，避免后台继续显示 403。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.217`

## V2.1.218 (2025-12-25)
- **模块/页面**：收紧安全链放行范围，`/api/posts/**` 与 `/api/comments/**` 仅允许 GET 访问，写操作必须登录并通过权限校验。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.218`

## V2.1.219 (2025-12-25)
- **模块/页面**：恢复登录态失败时若返回 401/403 均清理本地 token，避免前端卡在无权限状态并反复 403。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.219`

## V2.1.220 (2025-12-25)
- **模块/页面**：JWT Base64URL 解码补齐 `=`，避免 exp 解析失败导致过期判断失效。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.220`

## V2.1.221 (2025-12-25)
- **模块/页面**：埋点类公共请求（如 `/analytics/page-view`）命中 401 时不再触发会话失效弹窗，避免打断前台浏览体验。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.221`

## V2.1.222 (2025-12-26)
- **模块/页面**：修复后台访问日志（`/admin/analytics`）来源识别：文章详情页后端埋点补齐前端透传的 referrer，支持解析搜索引擎来源并在日志中展示“搜索引擎：关键词”（如“谷歌：MyBatis 源码解析”），同时流量来源统计对搜索引擎按引擎名聚合，避免关键词维度爆炸。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.222`

## V2.1.223 (2025-12-26)
- **模块/页面**：修复文章详情页访问不存在 ID（`/article/xxxx`）时错误回退为“最新文章占位”的问题：新增文章加载状态与 404 分支，后端返回不存在/未发布时前端明确展示 404，不再展示错误标题/摘要与空正文。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.223`

## V2.1.224 (2025-12-26)
- **模块/页面**：修复归档页（`/archive`）文章卡片标签顺序抖动：前后端统一对 tags 做稳定排序，避免因后端 Set/无序集合序列化导致同一文章标签顺序在加载后发生变化。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.224`

## V2.1.225 (2025-12-26)
- **模块/页面**：修复前端潜在 XSS 注入面：移除 Markdown 渲染中的 `rehype-raw`（不再执行原生 HTML），并引入 HTML/Markdown 清洗（`rehype-sanitize` + `DOMPurify`）对文章正文 HTML 与作者简介等 `dangerouslySetInnerHTML` 输出做安全过滤，阻断 `javascript:` 链接与脚本注入。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.225`

## V2.1.226 (2025-12-26)
- **模块/页面**：修复后端全局异常处理信息泄露风险：移除 `printStackTrace`，统一使用 `log.error` 记录堆栈；生产环境对外固定返回“服务器内部错误”，仅在 `dev/local` profile 下返回真实异常 message 便于调试。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.226`

## V2.1.227 (2025-12-26)
- **模块/页面**：修复后端 `System.out.println` 直出日志：站点广播与 meta 输出统一改用 slf4j（`log.info/debug`），日志不再输出完整广播 content，仅记录长度/状态，降低信息泄露与线上日志污染风险。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.227`

## V2.1.228 (2025-12-26)
- **模块/页面**：修复首页文章列表性能：从“前端一次性拉取大量文章 + 本地过滤/分页”调整为“后端分页（`GET /api/posts`）+ 前端按页查询”；分类筛选支持父分类包含子分类文章；文章详情页新增 `neighbors` 接口获取上一篇/下一篇/同分类推荐，避免依赖首页全量文章列表。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.228`

## V2.1.229 (2025-12-26)
- **模块/页面**：修复前端白屏：移除 `AppFull.jsx` 中遗留的 `posts` 引用（已切换为后端分页 `postsPage`），避免运行时 `ReferenceError: posts is not defined` 直接导致页面崩溃。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.229`

## V2.1.230 (2025-12-26)
- **模块/页面**：优化浏览量限流实现：用 Caffeine TTL 缓存（IP+post，10 分钟过期 + 最大容量上限）替代 `VIEW_RATE_LIMITER.size() > 5000` 直接 `clear()` 的演示型做法；缓存与 10 分钟数据库去重窗口对齐，减少抖动与 DB 压力，并在异常时回滚缓存占位避免误伤计数。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.230`

## V2.1.231 (2025-12-26)
- **模块/页面**：清理前端遗留未使用组件：删除 `src/components/ArticleDetail.jsx`（旧版详情页组件，包含 `dangerouslySetInnerHTML` 且当前无引用），避免后续维护者误改错文件并降低潜在误用风险。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.231`

## V2.1.232 (2025-12-26)
- **模块/页面**：补齐后端统一 HTTP 安全响应头：在 Spring Security 中新增 CSP、Referrer-Policy、X-Frame-Options、HSTS（仅 https 生效）、Permissions-Policy、X-Content-Type-Options，作为前端 XSS 清洗之外的第二道防线，降低被嵌入点击劫持与浏览器侧能力滥用风险。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.232`

## V2.1.233 (2025-12-26)
- **模块/页面**：统一后端错误码语义：新增 `NotFoundException` 并由全局异常处理映射为 404；将文章/评论/分类/标签/游戏页/角色等“资源不存在”场景从 `IllegalArgumentException`（400）调整为 404，便于 SEO/爬虫与日志分析；同时补齐 `IllegalStateException` 的 400 映射，避免状态类异常误返 500。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.233`

## V2.1.234 (2025-12-26)
- **模块/页面**：优化文章列表/归档列表性能：修复 `PostService.toSummary` 的 N+1 查询风险，分页返回前批量统计每篇文章的已审核评论数（group by post_id）并批量加载标签（post_tags join tags），同时通过 `@EntityGraph` 预加载 category/author，避免列表页与归档月列表在文章增多后导致 DB QPS 飙升。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.234`

## V2.1.235 (2025-12-26)
- **模块/页面**：修复后端启动编译失败：调整 `SecurityConfig` 中安全响应头链式调用方式，避免 `permissionsPolicy` 配置返回类型差异导致 `.contentTypeOptions(...)` 找不到方法，从而引发 `java: 找不到符号` 编译错误。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.235`

## V2.1.236 (2025-12-26)
- **模块/页面**：优化前端后台交互与日志规范：后台管理页移除 `alert()` 弹窗，统一改用 `AdminNoticeBar + useTimedNotice` 的非打断式提示；新增 `src/utils/logger.js`，将全站零散的 `console.warn` 收敛为可控输出（开发环境全量、生产环境采样，支持通过 `VITE_LOG_SAMPLE_RATE` 配置，并预留 Sentry 接入点）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.236`

## V2.1.237 (2025-12-26)
- **模块/页面**：修复首页二级分类筛选加载体验：筛选/分页触发 `postsLoading` 时隐藏旧文章卡片，避免“加载中卡片 + 旧卡片堆叠”的视觉别扭；同时清理仓库根目录遗留的入口原型 `App.jsx`，避免后续维护者误改。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.237`

## V2.1.238 (2025-12-26)
- **模块/页面**：修复首页筛选加载期的“未找到匹配文章”误提示：仅在 `postsLoading=false` 且无错误、列表为空时才展示“未找到/NO DATA”，加载过程中只显示“文章加载中…”骨架提示，避免误导与视觉冲突。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.238`

## V2.1.239 (2025-12-26)
- **模块/页面**：优化首页筛选加载体验：当 `postsLoading=true`（或加载失败）时隐藏分页页码，仅在列表数据加载完成且无错误时展示页码，避免“内容未出但页码先出”的违和感。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.239`

## V2.1.240 (2025-12-26)
- **模块/页面**：仓库维护性治理：对前端做“引用追踪 + legacy 收拢”，将无引用的早期原型组件迁入 `SanguiBlog-front/src/legacy/` 并增加弃用说明；将未引用的模板资源 `react.svg` 迁入 legacy；补充 `.gitignore` 忽略 `pw-temp/`，降低误提交与误维护风险；对 `NOTE.md`/`AGENTS.md`/`AGENTS-EDIT.md` 做 UTF-8（无 BOM）与不可见控制字符清理，避免复制/搜索异常与协作踩坑。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.240`

## V2.1.241 (2025-12-27)
- **模块/页面**：仓库 UTF-8/换行符规范化：新增根目录 `.editorconfig` 与 `.gitattributes`，统一文本编码为 UTF-8、换行符为 LF，降低在不同终端/编辑器下出现乱码与 diff 噪声的风险。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.241`

## V2.1.242 (2025-12-27)
- **模块/页面**：前端可维护性拆分：将首页渲染组合从 `AppFull.jsx` 抽离为 `src/appfull/public/HomeView.jsx`，将页脚抽离为 `src/appfull/ui/SiteFooter.jsx`，降低 `AppFull.jsx` 体量并收敛 Home/Footer 相关逻辑与样式，便于后续分层演进。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.242`

## V2.1.243 (2025-12-29)
- **模块/页面**：后台 `/admin/settings` 游戏管理上传路径规则调整：创建游戏页时目录名改为上传 HTML 文件名（如 `register.html` -> `uploads/games/register/index.html`），并对目录/slug 冲突自动递增为 `register2`、`register3`…；若发生自动改名，会通过创建接口的 `message` 提示上传人，避免误以为覆盖了旧页面。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.243`

## V2.1.244 (2025-12-29)
- **模块/页面**：修复游戏页面 `iframe` 可能被浏览器拦截的问题：全站默认仍禁止被嵌入（`frame-ancestors 'none'` + `X-Frame-Options: DENY`），但对 `/uploads/games/**` 单独放开为仅允许同源嵌入（`frame-ancestors 'self'` + `X-Frame-Options: SAMEORIGIN`），确保工具页可正常通过 `iframe` 展示上传的 HTML。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.244`

## V2.1.245 (2025-12-29)
- **模块/页面**：统一存储根路径文档与默认配置：将 `storage.base-path` 默认值调整为跨平台相对路径 `uploads`，并在 `NOTE.md` 明确生产环境建议通过 `STORAGE_BASE_PATH` 指向 `/home/sangui/uploads`（或实际挂载目录），避免因工作目录变化导致落盘位置漂移。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.245`

## V2.1.246 (2025-12-29)
- **模块/页面**：修复首页页脚默认版权文案显示异常：将 `Copyright ©` 改为更稳妥的 `Copyright (c)`，避免部分环境/字体导致 © 被替换成问号等乱码字符。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.246`

## V2.1.247 (2025-12-29)
- **模块/页面**：优化游戏页上传 slug 规则对中文文件名的兼容性：创建游戏页时 slug 默认取上传 HTML 文件名（去扩展名），英文仍按 URL-safe 规则生成；当文件名包含中文等非 ASCII 字符时，slug 尽量保留 Unicode 字符（并过滤 Windows 不允许的目录字符与控制字符），避免退化为 `game`；同时保持目录冲突时自动递增为 `xxx2/xxx3...` 并提示上传人。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.247`

## V2.1.248 (2025-12-29)
- **模块/页面**：修复环境切换脚本破坏 YAML 缩进的问题：`scripts/switch-env.ps1` 改为在原有缩进基础上只替换值（保留前导空格与注释后的空格），避免切换 dev/prod 后 `application.yaml` 出现 `site:` 下子项缩进不一致导致解析异常；同时统一 `application.yaml` 中 `storage/site` 块的缩进为 2 空格，并补充 `ChangeEnv.md` 说明。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.248`

## V2.1.249 (2025-12-29)
- **模块/页面**：修复生产环境静态资源域名误指向问题：生产环境切换时将 `site.asset-base-url` 固定写入为 `http://sangui.top/uploads`（不再依赖 `ASSET_BASE_URL` 覆盖），避免误配环境变量导致 `/uploads/**` 资源前缀变为 `new.sangui.top` 等非预期域名。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.249`

## V2.1.249 (2025-12-30)
- **模块/页面**：新增首个对外发布版本 Release 文档 `release/V2.1.249.md`，用于发布页/公告直接引用。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.249`

## V2.1.250 (2025-12-31)
- **模块/页面**：后台访问日志（`/admin/analytics`）首页标题打点优化：将首页访问从 `Home` 调整为 `home(当前页/总页数)`（如 `home(1/16)`），并在首页文章列表分页请求完成后计算 `当前页/总页数` 写入访问日志；由于首页 URL 不包含页码信息，翻页时也能得到准确可读的日志标题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.250`

## V2.1.251 (2025-12-31)
- **模块/页面**：后台访问日志（`/admin/analytics`）分页交互增强：新增数字页码按钮（含省略号折叠），支持直接跳转到任意页；与“条数/页”联动，切换每页条数会回到第 1 页，并避免重复拉取导致的额外请求。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.251`

## V2.1.252 (2025-12-31)
- **模块/页面**：后台访问日志“清理我的访问日志”能力补强：除按 userId 清理与按历史 IP 反向清理匿名记录外，额外删除 `viewer_ip=127.0.0.1` 的匿名访问日志，解决本地/反代环境下回环地址导致的清理残留问题。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.252`

## V2.1.253 (2025-12-31)
- **模块/页面**：后台访问日志（`/admin/analytics`）新增筛选/检索：支持按 IP、关键词、用户状态（已登录/访客）与日期区间过滤访问日志；后端 `/api/admin/analytics/page-views` 扩展对应查询参数并以 JPA Specification 组合条件查询，前端新增筛选栏与“查询/重置”操作，显著提升排障效率。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.253`

## V2.1.254 (2025-12-31)
- **模块/页面**：新增 uploads 同步脚本 `scripts/sync-uploads.bat`：通过 `scp` 拉取生产端 `/home/sangui/uploads/games` 到临时目录，再用 `robocopy /MIR` 镜像到本地 `uploads/games`，确保“以生产端为准”且不对远程做任何写操作；同时 `NOTE.md` 补充使用方式，并在 `.gitignore` 忽略 `scripts/.tmp/` 避免临时目录误提交。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.254`

## V2.1.255 (2025-12-31)
- **模块/页面**：修复 uploads 同步脚本在 Windows 下双击运行报错的问题：由于仓库 `.gitattributes` 强制文本使用 LF，导致 `.bat` 被 `cmd.exe` 解析异常；现改为 ASCII 的 `scripts/sync-uploads.bat` 作为包装器，核心逻辑迁移到 `scripts/sync-uploads.ps1`（PowerShell 处理 UTF-8 更稳），并在 `.gitattributes` 为 `*.bat/*.cmd` 单独指定 `eol=crlf`。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.255`

## V2.1.256 (2025-12-31)
- **模块/页面**：后端新增“BotGuard”反爬风控：在 Java Web 层统一采集请求基础信息并基于进程内短期内存状态做风险评分（不依赖 Redis）；按风险分执行放行/轻度延迟/高滥用路径验证码/短暂阻断，并提供“主动降分”机制减少 NAT 场景误伤；新增验证码接口 `/api/guard/captcha` 与 `/api/guard/verify` 用于完成短期验证并下发 `sg_guard` Cookie。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.256`

## V2.1.257 (2025-12-31)
- **模块/页面**：修复后端启动失败：`SecurityConfig` 中 `addFilterBefore` 不能以自定义 Filter（`JwtAuthenticationFilter`）作为参照顺序，否则会报 “Filter does not have a registered order”；现改为以 Spring Security 内置的 `UsernamePasswordAuthenticationFilter` 作为锚点，确保 BotGuard/JWT 过滤器链可正常构建。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.257`

## V2.1.258 (2025-12-31)
- **模块/页面**：修复 BotGuard 误伤管理端：管理后台请求（如 `/api/admin/posts`、`/api/admin/analytics/page-views`）在鉴权前被 BotGuard 判定为高风险并返回 429，导致 Admin 面板 “load posts failed”；现将 `/api/admin/**`、`/api/permissions/me`、`/api/upload/**` 加入 BotGuard 白名单，仅交由 Spring Security 做认证/授权，避免真实管理员被“请求过于频繁”拦截。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.258`

## V2.1.259 (2025-12-31)
- **模块/页面**：修复已登录用户接口仍被 BotGuard 429 的问题：通知中心等 `isAuthenticated()` 接口（如 `/api/notifications/history`）在 JWT 鉴权生效前被 BotGuard 误判为异常并短封；现 BotGuard 在检测到请求携带“有效 JWT”时直接放行（权限仍由 Spring Security 控制），避免后台与已登录用户体验被“请求过于频繁”影响。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.259`

## V2.1.260 (2025-12-31)
- **模块/页面**：进一步降低登录态接口被 429 误伤的概率：将 `/api/notifications/**`、`/api/users/**`、`/api/permissions/**` 加入 BotGuard 白名单，让这些登录态接口优先交由 Spring Security 返回 401/403（而非被 BotGuard 提前短封 429），提升后台与通知中心稳定性。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.260`

## V2.1.261 (2025-12-31)
- **模块/页面**：修复浏览器刷新后静态资源可能被 BotGuard 429 打断的问题：BotGuard 的短暂阻断仅对 `/api/**` 生效，非 API 请求（页面入口、CSS/JS 等静态资源）即便命中短封窗口也不返回 429，避免出现“刷新后无样式/白屏”的体验问题；同时延迟策略对静态资源不生效。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.261`

## V2.1.262 (2026-01-01)
- **模块/页面**：修复访客首次打开文章列表偶发提示“文章加载失败/登录已过期”的问题：前端请求遇到 401 时先清理本地残留 token，并对公开读取接口（GET）自动无鉴权重试一次，避免必须手动刷新才能恢复。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.262`

## V2.1.263 (2026-01-01)
- **模块/页面**：优化仓库忽略规则：将前端构建压缩包 `SanguiBlog-front/dist.zip` 纳入 `.gitignore`，避免构建产物被提交导致仓库膨胀、拉取变慢。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.263`

## V2.1.264 (2026-01-01)
- **模块/页面**：新增必应站长工具（Bing Webmaster Tools）验证 meta 标记：在前端首页入口 `SanguiBlog-front/index.html` 的 `<head>` 中添加 `msvalidate.01`，用于保持站点所有权验证状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.264`

## V2.1.265 (2026-01-01)
- **模块/页面**：新增 Google Search Console 验证 meta 标记：在前端首页入口 `SanguiBlog-front/index.html` 的 `<head>` 中添加 `google-site-verification`，用于保持站点所有权验证状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.265`

## V2.1.266 (2026-01-01)
- **模块/页面**：新增百度站长平台验证 meta 标记：在前端首页入口 `SanguiBlog-front/index.html` 的 `<head>` 中添加 `baidu-site-verification`，用于保持站点所有权验证状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.266`

## V2.1.267 (2026-01-01)
- **模块/页面**：新增 360 站长平台验证 meta 标记：在前端首页入口 `SanguiBlog-front/index.html` 的 `<head>` 中添加 `360-site-verification`，用于保持站点所有权验证状态。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.267`

## V2.1.268 (2026-01-01)
- **模块/页面**：新增自动更新站点地图：后端提供 `GET /sitemap.xml`（XML）与 `GET /robots.txt`（文本），从数据库聚合已发布文章与已启用工具页生成站点地图，并通过缓存/变更标记/定时刷新自动更新，支持在主域名下直接访问 `https://www.sangui.top/sitemap.xml`（或 `https://sangui.top/sitemap.xml`）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.268`

## V2.1.269 (2026-01-01)
- **模块/页面**：修复线上访问 `/sitemap.xml` 被 SPA 回退导致“自动跳回首页”的问题：补充 Nginx 精确匹配规则，将 `location = /sitemap.xml` 与 `location = /robots.txt` 优先反代到后端（放在 `try_files $uri /index.html` 前），确保 `https://www.sangui.top/sitemap.xml` / `https://sangui.top/sitemap.xml` 可直接返回 XML。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.269`

## V2.1.270 (2026-01-01)
- **模块/页面**：后台访问日志增强：后端对 `GET /sitemap.xml`（及 `/robots.txt`）的请求追加服务端 PV 记录（写入 `analytics_page_views`，`pageTitle = sitemap.xml/robots.txt`），便于超级管理员在 `/admin/analytics` 检索站点地图抓取行为；默认对同一 IP + 同一页面做 10 分钟限流，避免日志膨胀。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.270`

## V2.1.271 (2026-01-02)
- **模块/页面**：站点地图能力增强：`/sitemap.xml` 在 URL 规模超出阈值时自动返回 `<sitemapindex>` 并通过 `page` 参数分片拉取（`/sitemap.xml?page=1..N`），同时 `/sitemap.xml` 与 `/robots.txt` 支持 `ETag/If-None-Match` 条件请求返回 304，降低搜索引擎重复抓取的带宽与 CPU 成本；新增配置 `site.sitemap.max-urls-per-file` 控制单文件最大 URL 数（默认 45000）；`/robots.txt` 默认禁止抓取 `/api/`，避免接口被误收录。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.271`

## V2.1.272 (2026-01-02)
- **模块/页面**：文章详情目录体验优化：目录浮层在一/二/三级标题之间增加可区分的缩进层级（提升结构感与扫读效率），并修复暗色模式下目录滚动条轨道背景仍为白色的问题（为目录滚动区域增加暗色滚动条样式）。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.272`

## V2.1.273 (2026-01-02)
- **模块/页面**：文章详情目录可读性增强：目录浮层改为树形引导线（类似文件树），通过多级竖线与横向连接线更醒目地区分 h1/h2/h3 层级关系；桌面侧栏与移动抽屉目录同步生效，暗色滚动条样式保持不变。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.273`

## V2.1.274 (2026-01-02)
- **模块/页面**：文章图片预览体验优化：修复浏览器缩放时预览图被额外留白挤压导致“放大反而变小”的视觉问题（改为基于 `vw/vh` 的约束尺寸）；新增预览层鼠标滚轮缩放与放大后拖拽平移；移除右上角“关闭”按钮，统一为再次点击图片/遮罩关闭。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.274`

## V2.1.275 (2026-01-02)
- **模块/页面**：文章详情目录交互增强：目录浮层加入 ScrollSpy（滚动阅读时自动高亮当前章节），并在目录滚动区域自动跟随定位，降低长文查找成本；桌面侧栏与移动抽屉目录同步生效。
- **模块/页面**：补充发布说明：新增版本发布文档 `release/V2.1.275.md`，汇总自 `V2.1.249` 以来的核心对外变化与升级要点。
- **模块/页面**：更新部署文档：刷新根目录 `README.md`，同步最新配置项（JDK 21、`storage.base-path`、JWT_SECRET 等）、Nginx sitemap/robots 反代要点与 `V2.1.275` 新增的 sitemap 分片/ETag 能力说明。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.275`

## V2.1.276 (2026-01-03)
- **模块/页面**：修复后台仪表盘“访客走势图”跨年后缺失 12 月末数据的问题：访问日志聚合改为按天窗口分页拉取（适配后端 size=200 上限）并统一用 `yyyy-MM-dd` 作为日期 key，确保最近 7/14/30 天跨月/跨年均能正确展示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.276`

## V2.1.277 (2026-01-03)
- **模块/页面**：优化后台仪表盘“访客走势图”视觉与可读性：改为 PV 柱状 + UV 折线组合图，并在鼠标悬浮到对应日期时显示该日 PV/UV 值（Tooltip + 指示线），更适合快速判断异常波动与趋势。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.277`

## V2.1.278 (2026-01-03)
- **模块/页面**：后台访问日志（`/admin/analytics`）新增“隐藏 robots/sitemap”筛选开关：仅前端过滤显示 `robots.txt` 与 `sitemap.xml` 的访问记录（不删除数据），便于排除爬虫抓取噪音；点击“重置”会自动取消该过滤并恢复显示。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.278`

## V2.1.279 (2026-01-03)
- **模块/页面**：优化后台访问日志“隐藏 robots/sitemap”为服务端分页过滤：`GET /api/admin/analytics/page-views` 新增 `excludeSystemPages=true`，在后端排除 `title=robots.txt/sitemap.xml` 且 `postId` 为空的系统页面记录，确保列表分页与 total 统计准确；前端开关改为传参请求，重置会取消该过滤。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.279`

## V2.1.280 (2026-01-03)
- **模块/页面**：后台访问日志新增“页面类型”筛选维度：`GET /api/admin/analytics/page-views` 支持 `pageType=ARTICLE|SYSTEM|PAGE`，可分别查看文章访问、系统页面（robots/sitemap）与普通页面（非文章且非系统）；前端查询区新增下拉选择，并与“隐藏 robots/sitemap”开关做互斥兼容，避免筛选冲突。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.280`

## V2.1.281 (2026-01-03)
- **模块/页面**：访问日志防爆表策略：新增按日归档表 `analytics_page_view_daily_stats`，并提供定时归档与可选滚动清理能力（`analytics.page-views.archive/cleanup` 配置控制，默认不启用清理以避免线上突然丢明细）；归档用于沉淀历史 PV/UV 日聚合，清理用于限制 `analytics_page_views` 明细体量，降低长期查询成本。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.281`

## V2.1.282 (2026-01-03)
- **模块/页面**：修复后台访问日志筛选误差：将“隐藏 robots/sitemap”与“机器页面（robots/sitemap）”的判定口径统一为日志表“文章”列的展示值（`post.title` 优先，否则 `page_title`），仅当该列精确为 `robots.txt` 或 `sitemap.xml` 时才过滤/筛选，避免误筛选与漏筛选。
- **模块/页面**：交互优化：访问日志查询区的下拉筛选（页面类型、用户状态）变更后自动按当前条件触发一次查询，无需再手动点击“查询”按钮。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.282`

## V2.1.283 (2026-01-03)
- **模块/页面**：进一步修复访问日志“隐藏 robots/sitemap/机器页面”筛选误差：后端判定逻辑改为分别对 `post.title` 与 `page_title` 做精确等值匹配（不依赖 TRIM 方言），避免因数据库函数差异导致的误筛选/漏筛选。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.283`

## V2.1.284 (2026-01-03)
- **模块/页面**：修复后台访问日志（`/admin/analytics`）“页面类型-文章访问”筛选误差：后端判定文章访问改为以可关联到真实 Post 为准，避免历史脏数据 `post_id=0/悬空外键` 导致文章筛选混入非文章记录。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.284`

## V2.1.285 (2026-01-03)
- **模块/页面**：修复后台访问日志（`/admin/analytics`）“页面类型-文章访问”筛选反向：文章访问判定改为直接基于 `analytics_page_views.post_id` 是否为空，避免 join 口径/历史数据差异导致筛选结果变成“普通页面+机器页面”的反向集合。
- **版本**：首页 Banner 更新为 `SANGUI BLOG // V2.1.285`

